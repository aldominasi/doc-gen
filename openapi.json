openapi: 3.0.3
info:
  title: Privati Akkredidati
  description: Middleware per la comunicazione con il cup regionale. Per
    effettuare le request inserire la versione (es. 1.0.0) nel campo header
    Accept-Version
  version: 1.0.0
components:
  schemas: {}
paths:
  /api/:
    get:
      responses:
        "200":
          description: Default Response
  /api/budget/:
    get:
      summary: Api per recuperare i budget
      tags:
        - Budget
      parameters:
        - schema:
            type: string
          in: query
          name: periodo
          required: true
          description: "Periodo di riferimento in formato YYYYMM; es: 202311"
        - schema:
            type: string
          in: query
          name: branca
          required: false
          description: Branca di cui si vuogliono visualizzare i dati (se non presente
            verranno inviate tutte le branche)
      responses:
        "200":
          description: Default Response
  /api/budget/updateBranca:
    patch:
      summary: Api per modificare la branca di una nre nel budget
      tags:
        - Budget
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                nre:
                  type: string
                  description: Codice NRE della ricetta
                branca:
                  type: string
                  description: Branca da inserire
              required:
                - nre
                - branca
        required: true
      responses:
        "200":
          description: Default Response
  /api/cup/getBookingLink:
    post:
      summary: Api per ricevere l'url della prenotazione
      tags:
        - Cup
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                personIndentifier:
                  type: string
                  description: Codice fiscale del paziente
                nre:
                  type: string
                  description: Codice dell'impegnativa
              required:
                - personIndentifier
                - nre
        required: true
      responses:
        "200":
          description: Default Response
  /api/cup/bookings:
    get:
      summary: Verifica status ricetta dema e Lista appuntamenti
      tags:
        - Cup
      parameters:
        - schema:
            type: string
          in: query
          name: admissionCodes
          required: false
          description: Lista di codici accettazione separati da virgola
        - schema:
            type: string
          in: query
          name: bookedOnAuthority
          required: false
          description: >-
            consente di regolare il confine di ricerca per appuntamenti. Sono
            interni all'Asl o per aziende private anche esterne all'Asl

            Available values : external, internal, internalAndExternal
        - schema:
            type: string
          in: query
          name: bookingId
          required: false
          description: Id di sistema dell'appuntamento da ricercare
        - schema:
            type: string
          in: query
          name: bookingListTypeId
          required: false
          description: >-
            Indica se in fase di risposta oscurare aluni campi o meno, ovvero se
            sostituire il valore di quei campi con **********. Come ad esempio
            il paziente, il numero di telefono, l'esenzione...

            Possibili Valori:

            2 - non oscura dati

            3 - oscura le informazioni del paziente, della prestazione, dell'esenzione...
        - schema:
            type: string
          in: query
          name: diaryIds
          required: false
          description: Lista di Id agende separati da virgola
        - schema:
            type: string
          in: query
          name: fromDate
          required: false
          description: ricerca a partire dal giorno
        - schema:
            type: string
          in: query
          name: nre
          required: false
          description: identificativo univoco ricetta
        - schema:
            type: string
          in: query
          name: patientId
          required: false
          description: identificativo di sistema dell'assistito
        - schema:
            type: string
          in: query
          name: reservationId
          required: false
        - schema:
            type: string
          in: query
          name: runAsFiscalCode
          required: false
          description: Codice Fiscale dell'utente da impersonificare. (Da utilizzarsi
            qualora il consumer dell' NGH API sia abilitato ad impersonificare
            altri utenti presenti nel sistema NGH CUP. Attraverso questo campo
            si sarà in grado di richiamare il microservizio utilizzando le
            abilitazioni dell'utente che si intende impersonificare.)
        - schema:
            type: string
          in: query
          name: runAsUserId
          required: false
          description: Id interno di sistema dell'utente da impersonificare. Se non in
            possesso dell'id interno di sistema e' possibile usare il parametro
            runAsFiscalCode. (Da utilizzarsi qualora il consumer dell' NGH API
            sia abilitato ad impersonificare altri utenti presenti nel sistema
            NGH CUP. Attraverso questo campo si sarà in grado di richiamare il
            microservizio utilizzando le abilitazioni dell'utente che si intende
            impersonificare.)
        - schema:
            type: integer
          in: query
          name: statusMask
          required: false
          description: >-
            Bitmask per filtrare sullo stato della prenotazione ES: Prenotato e
            Erogato = (8 + 1) = 9

            1 - Prenotato

            2 - Cancellato

            4 - Sospeso

            8 - Erogato

            16 - Non Erogato

            32 - Spostato

            64 - Prescritto (SISS)

            128 - Non confermato

            256 - Erogato parzialmente
        - schema:
            type: string
          in: query
          name: supplyModeIds
          required: false
          description: Lista di Id di regimi separati da virgola, vedi Schema
            SupplyModeR.id (recuperati dalla chiamata Recupero Codici Regimi di
            Erogazione)
        - schema:
            type: string
          in: query
          name: toDate
          required: false
          description: ricerca fino al giorno
        - schema:
            type: string
          in: query
          name: sort
          required: false
          description: >-
            Consente di ordinare i risultati in modo ascendente o discendente,
            va passato nel formato +/-{nome del campo per il quale si vuole
            ordinare} es: +entryTime Possibili valori:

            startTime - ordina per data appuntamento

            person - ordina per nome e cognome paziente

            entryTime - ordina per data di registazione a sistema dell'appuntamento
        - schema:
            type: string
          in: query
          name: view
          required: false
          description: >-
            consente di regolare la quantità di informazioni ritornate dal
            servizio. Di default è "normal"

            Available values : AVR, normal, synthetic, treemap, ultrasynthetic, ultraverbose, usercontext, verbose
        - schema:
            type: string
          in: query
          name: Range
          required: false
          description: items=0-19
      responses:
        "200":
          description: Default Response
  /api/cup/confirmBooking:
    post:
      summary: Conferma Prenotazione
      tags:
        - Cup
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                contacts:
                  type: object
                  description: >-
                    	
                    Schema da utilizzarsi nel caso in cui si vogliano salvare i dati con cui contattare l'assistito in merito all'appuntamento in fase di creazione. Se il consumer che utilizza tale microservizio e' correttamente configurato lato NGH CUP possono essere attivati degli automatismi quali per esempio: invio promemoria appuntamento pdf tramite email o promemoria sms o documentazione per il pagamento
                  properties:
                    email:
                      type: string
                      description: Email
                    phoneNumber:
                      type: string
                      description: Numero di telefono
                diaryId:
                  type: string
                  description: Identificativo dell'agenda che ha fornito la disponibilità per
                    l'appuntamento. Recuperato nel caso si provenga da uno
                    scenario in cui ho offettuato una ricerca di disponibilità
                forceBooking:
                  type: boolean
                  description: Parametro per forzare l'inserimento di un appuntamento o per
                    forzare un eventuale overbooking. L'utente che consuma il
                    microservizio deve essere propriamente configurato /
                    abilitato lato NGH-CUP a poter forzare appuntamenti
                    sull’agenda in esame.
                forceReasonId:
                  type: string
                  description: Identificativo motivazione forzatura libera, da valorizzare se il
                    parametro forceBooking e' uguale a true
                gpiExternalId:
                  type: string
                  description: Id esterno da valorizzare nel caso di prenotazioni di enti esterni
                    accreditati. Recuperato nel caso si provenga da uno scenario
                    in cui ho offettuato una ricerca di disponibilità
                lockId:
                  type: string
                  description: Identificativo lock disponibilita'. Da valorizzare nel caso si
                    provenga da uno scenario in cui ho offettuato una ricerca di
                    disponibilità e relativo pre-appuntamento
                personIdentifier:
                  type: string
                  description: >-
                    In questo campo è possibile passare:

                    Codice fiscale dell'assistito

                    Codice STP (codice per identificare paziente "straniero temporaneamente presente" su suolo italiano). Il codice in questione deve avere come prefisso STP

                    Codice ENI (codice per identificare paziente "europeo non iscritto" in condizioni di indigenza e privi di assistenza sanitaria). Il codice in questione deve avere come prefisso ENI
                prescriptionNumber:
                  type: string
                  description: Numero dell'impegnativa (NRE)
                processId:
                  type: string
                  description: Identificativo processo di prenotazione. Da valorizzare nel caso si
                    provenga da uno scenario in cui ho offettuato una ricerca di
                    disponibilità.
                services:
                  type: array
                  description: >-
                    	[
                    Lista degli identificativi delle prestazioni. Questa lista avra' SOLO in caso di prestazioni raggruppabili (prestazioni erogate dalla stessa agenda, nello stesso giorno ed alla stessa ora) tanti oggetti quante le prestazioni raggruppabili da prenotare insieme. In caso di prenotazione di singola prestazione avra' uno ed un solo oggetto
                  items:
                    type: object
                    properties:
                      curCode:
                        type: string
                        description: Codice CUR (Catalogo Unico Regionale) della prestazione,
                          obbligatorio se assente il parametro id.
                      id:
                        type: string
                        description: Id della prestazione, obbligatorio se assente il parametro curCode
                      requestId:
                        type: string
                        description: Identificativo della prestazione nel processo di ricerca
                          disponibilita'. Da valorizzare nel caso si provenga da
                          uno scenario in cui ho offettuato una ricerca di
                          disponibilità
                startTime:
                  type: string
                  description: Data e ora di inizio della prenotazione. (Puo' contenere anche
                    valori inferiori alla data odierna nel caso in cui il
                    parametro forceBooking sia uguale a true)
                status:
                  type: string
                  enum:
                    - EROGATA
                    - NON_EROGATA
                    - PRENOTATA
                  description: Stato appuntamento.
                supplyModeId:
                  type: string
                  description: Identificativo del regime di erogazione
                timebandId:
                  type: integer
                  description: Identificativo della fascia oraria. Da utilizzarsi nel caso in cui
                    non si stia forzando l'inserimento di un appuntamento
                    forceBooking=false
              required:
                - diaryId
                - personIdentifier
                - services
                - startTime
                - status
                - supplyModeId
        required: true
      responses:
        "200":
          description: Default Response
  "/api/cup/{diaryId}":
    put:
      summary: Aggiornamento dell'agenda
      tags:
        - Cup
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                diaries:
                  type: object
                  properties:
                    accessModeId:
                      type: integer
                      description: "Tipologia di accesso: -1-> non applicabile, 0-> a piedi, 1-> in
                        macchina"
                    accessTypeId:
                      type: integer
                      description: "Tipologia accesso agenda: 1-> Primo accesso, 0-> Accesso
                        successivo, -1-> Entrambi"
                    allCovers:
                      type: boolean
                      description: Indica se associare tutte le coperture economiche disponibili. Se
                        false, considera il campo coverIds.
                    authorityId:
                      type: string
                      description: Id ente
                    availabilityDelay:
                      type: integer
                      description: L'agenda mostra disponibilita' a partire da AVAILABILITY_DELAY
                        (ORE) da adesso.
                    code:
                      type: string
                      description: Codice agenda
                    defaultFreeBookingDate:
                      type: boolean
                      description: Imposta data default in forzatura libera
                    defOrderDurationMins:
                      type: integer
                      description: Durata di default in minuti delle nuove prestazioni aggiunte
                        all'agenda
                    diarySupplyModes:
                      type: array
                      description: Lista di regimi per l'agenda con indicazione del listino
                      items:
                        type: object
                        properties:
                          costCenter:
                            type: string
                            description: Id del Centro di costo collegato al regime agenda.
                          supplyModeId:
                            type: string
                            description: Id del regime
                          endDate:
                            type: string
                            description: Data di fine validità del regime per l'agenda in formato Unix epoch
                          startDate:
                            type: string
                            description: Data di inizio validità del regime per l'agenda in formato Unix
                              epoch
                          diaryId:
                            type: string
                            description: Id dell'agenda collegata al regime (corrisponde a quella corrente).
                              Da lasciare vuoto in fase di creazione.
                        required:
                          - costCenter
                          - supplyModeId
                          - endDate
                          - startDate
                    executionUnitId:
                      type: string
                      description: Id unita' erogante
                    hospitalId:
                      type: string
                      description: Id presidio
                    operationUnitId:
                      type: string
                      description: Id unita' operativa
                    siteId:
                      type: string
                      description: Id sede
                    forResidents:
                      type: boolean
                      description: true se l'agenda e' riservabile per i residenti
                    freeForceEnabled:
                      type: boolean
                      description: Indica se l'agenda è abilitata per effettuare la forzatura libera
                    freeForceNotesNeeded:
                      type: boolean
                      description: Identifica se le note in forzatura libera sono obbligatorie
                    name:
                      type: string
                      description: Nome agenda
                    onlyAdjacentSlots:
                      type: boolean
                      description: Se true, la prenotazione avviene solo su slots consecutivi.
                    orders:
                      type: array
                      description: Lista delle prestazioni associate all'agenda
                      items:
                        type: object
                        properties:
                          duration:
                            type: integer
                            description: Tempo necessario per l'esecuzione della prestazione
                          id:
                            type: string
                            description: Id della prestazione
                        required:
                          - duration
                          - id
                    priorityClasses:
                      type: array
                      items:
                        type: string
                      description: Lista id priorita'
                    privateFlag:
                      type: boolean
                      description: Indica se l'agenda non deve essere mostrata in disponibilita' a
                        meno che l'operatore non sia abilitato puntualmente
                    reminderAnonymization:
                      type: boolean
                      description: Indica se il promemoria per l'assistito sara' senza dati sensibili
                        del paziente
                    supplyModes:
                      type: array
                      items:
                        type: integer
                      description: Lista degli identificativi dei regimi di erogazione
                    slotSize:
                      type: integer
                      description: Grandezza dello slot espressa in minuti
                    typeId:
                      type: integer
                      description: "Tipo agenda: 1-> visita, 2-> tecnica, 3-> laboratorio"
                    visibility:
                      type: integer
                      description: Giorni di visibilita' agenda
                  required:
                    - accessModeId
                    - accessTypeId
                    - allCovers
                    - authorityId
                    - defaultFreeBookingDate
                    - defOrderDurationMins
                    - diarySupplyModes
                    - executionUnitId
                    - hospitalId
                    - operationUnitId
                    - siteId
                    - forResidents
                    - freeForceEnabled
                    - freeForceNotesNeeded
                    - name
                    - onlyAdjacentSlots
                    - orders
                    - priorityClasses
                    - privateFlag
                    - reminderAnonymization
                    - supplyModes
                    - slotSize
                    - typeId
                    - visibility
              required:
                - diaries
        required: true
      parameters:
        - schema:
            type: string
            minLength: 1
          in: path
          name: diaryId
          required: true
          description: Id di sistema dell'agenda da modificare
      responses:
        "200":
          description: Default Response
  /api/cup/doctors:
    post:
      summary: Recupero Medici
      tags:
        - Cup
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                doctors:
                  type: array
                  items:
                    type: string
      responses:
        "200":
          description: Default Response
  /api/cup/:
    put:
      summary: API per l'aggiornamento delle unità eroganti
      tags:
        - Cup
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                executionUnit:
                  type: object
                  description: Oggetto dell'unità erogante
                  properties:
                    doctors:
                      type: array
                      description: Lista di dottori
                      items:
                        type: object
                        properties:
                          endDate:
                            type: string
                            description: Data di fine Unix epoch
                          startDate:
                            type: string
                            description: Data di inizio di Unix epoch
                          fiscalCode:
                            type: string
                            description: Codice fiscale del dottore appartenete all'unita' erogante
                          isPrimary:
                            type: boolean
                            description: è primario?
                          roleCode:
                            type: string
                            description: Ruolo dottore appartenente all'unita' erogante
                        required:
                          - endDate
                          - startDate
                          - fiscalCode
                          - roleCode
                    registry:
                      type: object
                      properties:
                        automaticSupply:
                          type: boolean
                          description: Unità abilitata all'erogazione in fase di accettazione
                        code:
                          type: string
                          description: Codice unita' erogante
                        description:
                          type: string
                          description: Descrizione unita' erogante
                        directAdmission:
                          type: boolean
                          description: Unità abilitata all'accettazione senza prenotazione
                        endDate:
                          type: string
                          description: Data Fine validità Unita' Erogante
                        id:
                          type: string
                          description: Id unita' erogante
                        name:
                          type: string
                          description: Nome unita' erogante
                        idOperationUnit:
                          type: string
                          description: Id Unita' Operativa
                        notes:
                          type: string
                          description: Note per l'unita' erogante
                        place:
                          type: string
                          description: Indirizzo Unita' Erogante
                        specialization:
                          type: string
                          description: Branca unita' erogante
                        startDate:
                          type: string
                          description: Data Inizio validità Unita' Erogante
                        supplyModes:
                          type: array
                          description: Regimi di erogazione con relativo centro di costo
                          items:
                            type: object
                            properties:
                              costCenterId:
                                type: string
                                description: Id del centro di costo, associato al regime di erogazione
                              supplyModeType:
                                type: string
                                description: Regime di erogazione
                            required:
                              - costCenterId
                              - supplyModeType
                        type:
                          type: string
                          enum:
                            - AMBULATORIO
                            - LABORATORIO
                            - RADIOLOGIA
                          description: Tipo unita' erogante
                      required:
                        - description
                        - endDate
                        - id
                        - name
                        - idOperationUnit
                        - specialization
                        - startDate
                        - supplyModes
                        - type
                    services:
                      type: array
                      description: Prestazioni unita' erogante
                      items:
                        type: object
                        properties:
                          endDate:
                            type: string
                            description: Data di fine validità prestazione
                          startDate:
                            type: string
                            description: Data di inizio validità prestazione
                          cur:
                            type: string
                            description: Codice catalogo unico regionale della prestazione
                          regionalNomenclatureCode:
                            type: string
                            description: Codice nomenclatore regionale della prestazione
                        required:
                          - endDate
                          - startDate
                          - cur
                          - regionalNomenclatureCode
                  required:
                    - doctors
                    - registry
                    - services
              required:
                - executionUnit
        required: true
      responses:
        "200":
          description: Default Response
  /api/cup/orders:
    get:
      summary: Recupero liste di lavoro
      tags:
        - Cup
      parameters:
        - schema:
            type: string
          in: query
          name: admissionCode
          required: false
        - schema:
            type: string
          in: query
          name: authorityIds
          required: false
        - schema:
            type: string
          in: query
          name: bloodDrawReasonIds
          required: false
        - schema:
            type: string
          in: query
          name: booked
          required: false
        - schema:
            type: string
          in: query
          name: bookingCode
          required: false
        - schema:
            type: integer
          in: query
          name: bookingStatusMask
          required: false
        - schema:
            type: string
          in: query
          name: bookingsIds
          required: false
        - schema:
            type: string
          in: query
          name: constraintServiceId
          required: false
        - schema:
            type: string
          in: query
          name: constraintSupplyModeId
          required: false
        - schema:
            type: string
          in: query
          name: deliveryPlaceIds
          required: false
        - schema:
            type: string
          in: query
          name: deliveryPlaceRelatedSiteIds
          required: false
        - schema:
            type: string
          in: query
          name: diaryIds
          required: false
        - schema:
            type: string
          in: query
          name: entryUserId
          required: false
        - schema:
            type: string
          in: query
          name: executionDoctorIds
          required: false
        - schema:
            type: integer
          in: query
          name: executionStatusMask
          required: false
        - schema:
            type: string
          in: query
          name: executionUnitIds
          required: false
        - schema:
            type: string
          in: query
          name: externalBookingCode
          required: false
        - schema:
            type: string
          in: query
          name: fromScheduledDate
          required: false
        - schema:
            type: object
            properties:
              hour:
                type: integer
              minute:
                type: integer
              nano:
                type: integer
              second:
                type: integer
          in: query
          name: fromScheduledTime
          required: false
        - schema:
            type: string
          in: query
          name: hospitalIds
          required: false
        - schema:
            type: string
          in: query
          name: messageIds
          required: false
        - schema:
            type: string
          in: query
          name: nre
          required: false
        - schema:
            type: string
          in: query
          name: onlyAuthorized
          required: false
        - schema:
            type: string
          in: query
          name: operationUnitIds
          required: false
        - schema:
            type: string
          in: query
          name: outOfAvailability
          required: false
        - schema:
            type: string
          in: query
          name: overbooked
          required: false
        - schema:
            type: string
          in: query
          name: patientId
          required: false
        - schema:
            type: string
          in: query
          name: payed
          required: false
        - schema:
            type: string
          in: query
          name: priorityClassIds
          required: false
        - schema:
            type: string
          in: query
          name: productIds
          required: false
        - schema:
            type: string
          in: query
          name: reservationId
          required: false
        - schema:
            type: string
          in: query
          name: runAsFiscalCode
          required: false
        - schema:
            type: string
          in: query
          name: runAsUserId
          required: false
        - schema:
            type: string
          in: query
          name: siteIds
          required: false
        - schema:
            type: integer
          in: query
          name: supplyModeCategoryMask
          required: false
        - schema:
            type: string
          in: query
          name: toScheduledDate
          required: false
        - schema:
            type: object
            properties:
              hour:
                type: integer
              minute:
                type: integer
              nano:
                type: integer
              second:
                type: integer
          in: query
          name: toScheduledTime
          required: false
        - schema:
            type: boolean
          in: query
          name: traceEnable
          required: false
        - schema:
            type: string
          in: query
          name: worklistTypeId
          required: false
        - schema:
            type: string
          in: query
          name: Range
          required: false
        - schema:
            type: string
          in: query
          name: view
          required: false
      responses:
        "200":
          description: Default Response
  /api/cup/root:
    post:
      summary: Creazione/aggiornamento dell'unita' erogante effettuando anche la
        creazione dell'agenda e la creazione/aggiornamento della struttura
        dell'agenda
      tags:
        - Cup
      requestBody:
        content:
          application/json:
            schema:
              type: object
              additionalProperties: false
              properties:
                executionUnit:
                  type: object
                  description: Unita' erogante
                  properties:
                    doctors:
                      type: array
                      description: Lista dei dottori
                      items:
                        type: object
                        properties:
                          endDate:
                            type: string
                            description: Fine validita' del dottore in formato Unix epoch
                          startDate:
                            type: string
                            description: Inizio validita' del dottore in formato Unix epoch
                          fiscalCode:
                            type: string
                            description: Codice fiscale del dottore
                          isPrimary:
                            type: boolean
                          roleCode:
                            type: string
                            description: Ruolo dottore appartenente all'unita' erogante
                        required:
                          - endDate
                          - startDate
                          - fiscalCode
                    registry:
                      type: object
                      properties:
                        automaticSupply:
                          type: boolean
                          description: Unità abilitata all'erogazione in fase di accettazione
                        code:
                          type: string
                          description: Codice unita' erogante
                        description:
                          type: string
                          description: Descrizione dell'unità erogante
                        directAdmission:
                          type: boolean
                          description: Unità abilitata all'accettazione senza prenotazione
                        endDate:
                          type: string
                          description: Fine validita' dell'unita' erogante
                        name:
                          type: string
                          description: Nome dell'unita' erogante
                        notes:
                          type: string
                        place:
                          type: string
                          description: Indirizzo Unita' Erogante
                        idOperationUnit:
                          type: string
                          description: Id Unita' Operativa
                        specialization:
                          type: string
                          description: Branca unita' erogante
                        startDate:
                          type: string
                          description: Data Inizio validità Unita' Erogante in formato Unix epoch
                        supplyModes:
                          type: array
                          description: Regimi di erogazione con relativo centro di costo
                          items:
                            type: object
                            properties:
                              costCenterId:
                                type: string
                                description: Id del centro di costo, associato al regime di erogazione
                              supplyModeType:
                                type: string
                                description: Regime di erogazione
                            required:
                              - costCenterId
                              - supplyModeType
                        type:
                          type: string
                          description: Tipo unita' erogante
                      required:
                        - description
                        - endDate
                        - name
                        - idOperationUnit
                        - specialization
                        - startDate
                        - supplyModes
                        - type
                    services:
                      type: array
                      description: Prestazioni unita' erogante
                      items:
                        type: object
                        properties:
                          endDate:
                            type: string
                            description: Data di fine validita' prestazione in formato Unix epoch
                          startDate:
                            type: string
                            description: Data di inizio validita' prestazione in formato Unix epoch
                          cur:
                            type: string
                            description: Codice catalogo unico regionale della prestazione
                          regionalNomenclatureCode:
                            type: string
                            description: Codice nomenclatore regionale della prestazione
                        required:
                          - endDate
                          - startDate
                          - cur
                          - regionalNomenclatureCode
                  required:
                    - registry
                    - services
                diaries:
                  type: object
                  properties:
                    accessModeId:
                      type: integer
                      description: "Tipologia di accesso: -1-> non applicabile, 0-> a piedi, 1-> in
                        macchina"
                    accessTypeId:
                      type: integer
                      description: "Tipologia accesso agenda: 1-> Primo accesso, 0-> Accesso
                        successivo, -1-> Entrambi"
                    overbook:
                      type: boolean
                      description: Flag di attivazione overbook. Permette di aggirare i vincoli di
                        massimale su slot, fascia o giornata
                    allCovers:
                      type: boolean
                      description: Indica se associare tutte le coperture economiche disponibili. Se
                        false, considera il campo coverIds.
                    availabilityDelay:
                      type: number
                      description: L'agenda mostra disponibilita' a partire da AVAILABILITY_DELAY
                        (ORE) da adesso.
                    code:
                      type: string
                      description: Codice agenda
                    coverIds:
                      type: array
                      items:
                        type: string
                      description: Lista identificativi coperture economiche. Se si vogliono
                        selezionare tutte le coperture, utilizzare il campo
                        allCovers.
                    defaultFreeBookingDate:
                      type: boolean
                      description: Imposta data default in forzatura libera
                    defOrderDurationMins:
                      type: integer
                      description: Durata di default in minuti delle nuove prestazioni aggiunte
                        all'agenda
                    diarySupplyModes:
                      type: array
                      description: Lista di regimi per l'agenda con indicazione del listino
                      items:
                        type: object
                        properties:
                          costCenter:
                            type: string
                            description: Id del Centro di costo collegato al regime agenda.
                          id:
                            type: integer
                            description: Id della relazione tra Agenda e Regime di erogazione. Da lasciare
                              vuoto in fase di creazione.
                          priceListId:
                            type: string
                            description: "Id del listino associato all'agenda per questo particolare regime
                              di erogazione.Vedi Schema PriceListR.id recuperato
                              da GET: /api/v3/system-apis/pricelists"
                          supplyModeId:
                            type: string
                            description: Id del regime
                          endDate:
                            type: string
                            description: Data di fine validità del regime per l'agenda in formato Unix epoch
                          startDate:
                            type: string
                            description: Data di inizio validità del regime per l'agenda in formato Unix
                              epoch
                          diaryId:
                            type: string
                            description: Id dell'agenda collegata al regime (corrisponde a quella corrente).
                              Da lasciare vuoto in fase di creazione.
                        required:
                          - costCenter
                          - supplyModeId
                          - endDate
                          - startDate
                    doctors:
                      type: array
                      items:
                        type: string
                        description: Lista identificativi dei medici erogatori dell'agenda
                    diagnosis:
                      type: array
                      items:
                        type: string
                        description: "Lista di Id diagnosi vedi schema DiagnosisR.id recuperato da GET:
                          /api/v3/system-apis/diagnosis"
                    diaryAsls:
                      type: array
                      items:
                        type: string
                        description: Lista Id delle ASL a cui l'agenda e' relazionata
                    externalCode:
                      type: string
                      description: Identificativo dell'agenda interno degli enti accreditati.
                    forResidents:
                      type: boolean
                      description: true se l'agenda e' riservabile per i residenti
                    freeForceEnabled:
                      type: boolean
                      description: Indica se l'agenda è abilitata per effettuare la forzatura libera
                    freeForceNotesNeeded:
                      type: boolean
                      description: Identifica se le note in forzatura libera sono obbligatorie
                    freeForceMaxDistance:
                      type: number
                      description: "Numero di giorni massimo che possono intercorrere tra la data
                        odierna e la data in cui si vuole effettuare una
                        forzatura libera. Valore negativo: distanza nel passato"
                    freeForceMaxNumber:
                      type: number
                      description: Numero massimo di forzature libere previste per ogni giorno
                        sull'agenda
                    freeForceMinDistance:
                      type: number
                      description: "Numero di giorni minimo che devono intercorrere tra la data
                        odierna e la data in cui si vuole effettuare una
                        forzatura libera. Valore negativo: distanza nel passato"
                    freeForcePlaceHold:
                      type: boolean
                      description: Se true, le forzature libere occupano posto. (default true)
                    holderId:
                      type: string
                      description: Id del titolare dell'agenda, medico LP o equipe medica, vedi schema
                        DoctorR.id
                    hospitalWardId:
                      type: string
                      description: Per agende con regime interno, indica che l'agenda e' per tutti i
                        reparti del presidio identificato dall'hospitalId
                    id:
                      type: string
                      description: Identificativo di sistema dell'agenda, obbligatorio per le chiamate
                        di aggiornamento (PUT)
                    isInFirstAvail:
                      type: boolean
                      description: Se true, agenda viene presa in considerazione nella ricerca
                        migliore disponibilita'
                    manageSpecialProjects:
                      type: boolean
                      description: Flag che indica se in agenda vengono gestiti progetti speciali
                    maxAvailabilityHours:
                      type: number
                      description: Indica le ore, sommate alla data di ricerca disp. per cui puo'
                        essere ricercata disponibilita' su questa agenda
                    name:
                      type: string
                      description: Nome agenda
                    onlyAdjacentSlots:
                      type: boolean
                      description: Se true, la prenotazione avviene solo su slots consecutivi.
                    orderGroups:
                      type: array
                      description: Lista di raggruppamenti prestazioni.
                      items:
                        type: object
                        properties:
                          durationType:
                            type: string
                            description: "Tipo di misurazione: 0-> durata in slot, 1-> durata in minuti"
                          id:
                            type: string
                            description: Codice del raggruppamento prestazioni
                          orderDuration2:
                            type: string
                            description: Durata raggruppamento per 2 prestazioni. Se non specificata, la
                              durata è pari alla somma delle singole durate
                          orderDuration3:
                            type: string
                            description: Durata raggruppamento per 3 prestazioni. Se non specificata, la
                              durata è pari alla somma delle singole durate
                          orderDuration4:
                            type: string
                            description: Durata raggruppamento per 4 prestazioni. Se non specificata, la
                              durata è pari alla somma delle singole durate
                          orderDuration5:
                            type: string
                            description: Durata raggruppamento per 5 prestazioni. Se non specificata, la
                              durata è pari alla somma delle singole durate
                          orderDuration6:
                            type: string
                            description: Durata raggruppamento per 6 prestazioni. Se non specificata, la
                              durata è pari alla somma delle singole durate
                          orderDuration7:
                            type: string
                            description: Durata raggruppamento per 7 prestazioni. Se non specificata, la
                              durata è pari alla somma delle singole durate
                          orderDuration8:
                            type: string
                            description: Durata raggruppamento per 8 prestazioni. Se non specificata, la
                              durata è pari alla somma delle singole durate
                          orders:
                            type: array
                            items:
                              type: string
                            description: Lista di prestazioni dell'agenda associate al raggruppamento
                        required:
                          - durationType
                    orders:
                      type: array
                      description: Lista delle prestazioni associate all'agenda
                      items:
                        type: object
                        properties:
                          allDiagnosis:
                            type: boolean
                            description: Se true la prestazione vale per tutte le diagnosi dell'agenda
                          availabilityDelay:
                            type: number
                            description: L'agenda mostra disponibilita', per la prestazione, a partire da
                              AVAILABILITY_DELAY (ORE) da adesso.
                          bloodDraw:
                            type: boolean
                            description: Indica se la prestazione e' di tipo Prelievo di sangue
                          diagnosis:
                            type: array
                            items:
                              type: string
                            description: "Lista Id della diagnosi vedi schema DiagnosisR.id recuperato da
                              GET: /api/v3/system-apis/diagnosis"
                          duration:
                            type: integer
                            description: Tempo necessario per l'esecuzione della prestazione
                          extracup:
                            type: boolean
                            description: Indica se la prestazione e' prenotabile da un cup esterno tramite
                              integrazioni.
                          groupable:
                            type: boolean
                            description: Indica se la prestazione puo' essere erogata insieme ad altre
                              prestazioni (raggruppamento)
                          id:
                            type: string
                            description: Id della prestazione
                          maxAge:
                            type: number
                            description: Eta' massima del paziente per poter effettuare questa prestazione,
                              espressa in mesi
                          minAge:
                            type: number
                            description: Eta' minima del paziente per poter effettuare questa prestazione,
                              espressa in mesi
                          notes:
                            type: string
                            description: Note per la prestazione, apparia' nel promemoria che verra'
                              lasciato al paziente
                          online:
                            type: boolean
                            description: Indica se la prestazione e' prenotabile online
                          orderNotes:
                            type: array
                            items:
                              type: string
                            description: Lista di note associate alla prestazione
                          preparationTime:
                            type: number
                            description: Tempo di preparazione prima di poter eseguire la prestazione
                          priorityClasses:
                            type: array
                            items:
                              type: string
                            description: Lista identificativi delle priorita' con la quale e' possibile
                              erogare questa prestazione
                          resources:
                            type: array
                            items:
                              type: string
                            description: Lista identificativi delle risorse associate alla prestazione.
                          userNotes:
                            type: string
                            description: Note per l'utente CUP, apparira' all'operatore in fase di
                              prenotazione
                        required:
                          - duration
                          - id
                    priorityClasses:
                      type: array
                      items:
                        type: string
                      description: Lista identificativi delle priorita' con la quale e' possibile
                        erogare questa prestazione
                    privateFlag:
                      type: boolean
                      description: Indica se l'agenda non deve essere mostrata in disponibilita' a
                        meno che l'operatore non sia abilitato puntualmente
                    reminderAnonymization:
                      type: boolean
                      description: Indica se il promemoria per l'assistito sara' senza dati sensibili
                        del paziente
                    supplyModes:
                      type: array
                      items:
                        type: string
                      description: Lista degli identificativi dei regimi di erogazione
                    typeId:
                      type: integer
                      description: "Tipo agenda: 1-> visita, 2-> tecnica, 3-> laboratorio"
                    online:
                      type: boolean
                      description: Se true, prestazione prenotabile autonomamente da cittadino (se
                        prevista prenotazione tramite APP Online)
                    extraCup:
                      type: boolean
                      description: Flag che indica se la prestazione e' prenotabile su sistemi
                        integrati
                    slotSize:
                      type: number
                      description: Grandezza dello slot espressa in minuti
                    requestWards:
                      type: array
                      items:
                        type: string
                        description: Lista degli identificativi dei reparti del regime interno.
                    resources:
                      type: array
                      items:
                        type: string
                      description: Lista identificativi risorse associate all'agenda.
                    rules:
                      type: array
                      description: Lista di regole per gli sbarramenti. Per sbarramento si intende una
                        regola che riserva un certo numero di disponibilità ad
                        una determinata classe di priorita'.
                      items:
                        type: object
                        properties:
                          fromDay:
                            type: number
                            description: numero di giorni (relativo rispetto alla data di calendario) da cui
                              iniziare l'applicazione delle regola
                          id:
                            type: string
                            description: id della relazione sbarramento - agenda
                          minQuantity:
                            type: number
                            description: "numero minimo di prestazioni in % o numero assoluto, in base al
                              campo quantityType: 1-> numerico, 2 -> %"
                          modelId:
                            type: string
                            description: "Id dello sbarramento. E' il campo BookingRuleR.id recuperato da
                              GET: /api/v3/system-apis/bookingrules"
                          name:
                            type: string
                            description: nome dello sbarramento
                          priorityIds:
                            type: array
                            items:
                              type: number
                            description: Lista di id delle priorità
                          quantityType:
                            type: number
                            description: "Definisce unita' di misura di minQuantity e maxQuantity: 1->
                              numerico, 2-> %"
                          toDay:
                            type: number
                            description: numero di giorni (relativo rispetto alla data di calendario) da cui
                              terminare l'applicazione delle regola
                          typeId:
                            type: number
                            description: Tipologia di regola (su priorità, tipi paziente..)
                    visibility:
                      type: integer
                      description: Giorni di visibilita' agenda
                  required:
                    - accessModeId
                    - accessTypeId
                    - allCovers
                    - defaultFreeBookingDate
                    - defOrderDurationMins
                    - diarySupplyModes
                    - forResidents
                    - freeForceEnabled
                    - freeForceNotesNeeded
                    - name
                    - onlyAdjacentSlots
                    - orders
                    - priorityClasses
                    - privateFlag
                    - reminderAnonymization
                    - supplyModes
                    - typeId
                    - visibility
                schemas:
                  type: object
                  description: Struttura dell'agenda
                  properties:
                    id:
                      type: string
                      description: Id dell'agenda, required per le chiamate di aggiornamento
                    endDate:
                      type: string
                      description: Data di fine validita' della struttura in formato Unix epoch
                    status:
                      type: boolean
                      description: Se true, la struttura e' abilitata.
                    extra:
                      type: boolean
                      description: Se true, si tratta di una struttura con extra slot disponibili.
                    overbook:
                      type: boolean
                      description: Se true, la struttura consente l'overbook (aggiramento vincoli di
                        massimale su slot, fascia o giornata)
                    slotStartTime:
                      type: string
                      description: Ora di inizio degli slot di disponibilita' in formato Unix epoch
                    startDate:
                      type: string
                      description: Data di inizio validita' della struttura in formato Unix epoch
                    excludeFestivities:
                      type: boolean
                      description: Se true, esclude i giorni festivi dalle disponibilità. Se false,
                        ignora le festività e crea la disponibilita'.
                    forResidents:
                      type: boolean
                      description: Se true, struttura riservata per residenti.
                    forResidentsExpire:
                      type: number
                      description: Se forResidents=true, questa colonna indica la data di scandenza
                        del vincolo di riserva.
                    notes:
                      type: string
                      description: Note struttura.
                    refSchemaId:
                      type: string
                      description: Se e' un extra slot, contiene il riferimnto allo schema originale.
                    schemaSlotSize:
                      type: integer
                      description: Dimensioni dello slot in minuti.
                    timebands:
                      type: array
                      description: Fasce associate a questa struttura.
                      items:
                        type: object
                        properties:
                          allDiagnosis:
                            type: boolean
                            description: /Se true, la fascia vale per tutte le diagnosi dell'agenda.
                          bookingsNumber:
                            type: number
                            description: Numero delle prenotazioni esistenti per la fascia.
                          diagnosis:
                            type: array
                            items:
                              type: string
                            description: "Lista di Id diagnosi vedi schema DiagnosisR.id recuperato da GET:
                              /api/v3/system-apis/diagnosis"
                          diagnosisFromDay:
                            type: number
                            description: Giorno dal quale gli sbarramenti iniziano ad essere attivi.
                          doctors:
                            type: array
                            description: Lista dei medici erogatori della fascia.
                            items:
                              type: object
                              properties:
                                code:
                                  type: string
                                  description: Codice del medico.
                                firstName:
                                  type: string
                                  description: Nome del medico
                                fiscalCode:
                                  type: string
                                  description: Codice fiscale del medico
                                id:
                                  type: string
                                  description: Id del medico.
                                lastName:
                                  type: string
                                  description: Cognome del medico
                          endTime:
                            type: string
                            description: Ora di fine della fascia in formato Unix epoch
                          extra:
                            type: boolean
                            description: Se true, si tratta di una fascia con extra slot disponibili.
                          forResidents:
                            type: boolean
                            description: Se true, fascia riservata per residenti.
                          forResidentsExpire:
                            type: number
                            description: Se forResidents=true, questa colonna indica la data di scandenza
                              del vincolo di riserva.
                          frequency:
                            type: number
                            description: "Frequenza prevista per la generazione delle date: 1-> Ogni
                              settimana, 2-> Ogni 2 settimane, 3-> Ogni 3
                              settimane, 4-> Ogni 4 settimane, 8-> La prima
                              occorrenza del mese, 16-> La seconda occorrenza
                              del mese, 32-> La terza occorrenza del mese, 6->
                              La quarta occorrenza del mese, 128-> L'ultima
                              occorrenza del mese, 256-> La quinta occorrenza
                              del mese"
                          hasDiagnosis:
                            type: boolean
                            description: Se true, la fascia ha associate diagnosi.
                          hasPriorityRules:
                            type: boolean
                            description: Se true, la fascia ha associati sbarramenti priorita.
                          hospitalWardId:
                            type: string
                            description: Per agende con regime interno, indica che la fascia e' per tutti i
                              reparti del presidio.
                          id:
                            type: string
                            description: Identificativo della fascia. Da lasciare vuoto in fase di creazione
                              (viene generato in automatico).
                          manageProjects:
                            type: boolean
                            description: Se true, nella fascia vengono gestiti progetti speciali.
                          maxAge:
                            type: number
                            description: Eta' massima del paziente per poter prenotare sulla fascia (in
                              mesi).
                          maxQuantity:
                            type: integer
                            description: Numero massimo di slots prenotabili nella fascia.
                          minAge:
                            type: number
                            description: Eta' minima del paziente per poter prenotare sulla fascia (in
                              mesi).
                          notes:
                            type: string
                            description: Note della fascia.
                          orders:
                            type: array
                            description: Lista delle prestazioni prenotabili nella fascia.
                            items:
                              type: object
                              properties:
                                duration:
                                  type: integer
                                  description: Tempo necessario per l'esecuzione della prestazione
                                id:
                                  type: string
                                  description: Id della prestazione
                                priorityClasses:
                                  type: array
                                  items:
                                    type: string
                                  description: Lista identificativi delle priorita' con la quale e' possibile
                                    erogare questa prestazione
                                supplyModes:
                                  type: array
                                  items:
                                    type: string
                                  description: Lista identificativi dei regimi di erogazione con la quale e'
                                    possibile erogare questa prestazione
                              required:
                                - duration
                                - id
                                - priorityClasses
                                - supplyModes
                          overbook:
                            type: boolean
                            description: Se true, la fascia consente l'overbook (aggiramento vincoli di
                              massimale su slot, fascia o giornata)
                          priorityClasses:
                            type: array
                            items:
                              type: string
                            description: Lista id priorita'
                          requestWards:
                            type: array
                            items:
                              type: string
                            description: Lista degli identificativi dei reparti del regime interno.
                          rowVersion:
                            type: number
                            description: Contatore modifiche effettuate.
                          rules:
                            type: string
                            description: Lista identificativi degli sbarramenti della fascia.
                          sex:
                            type: string
                            description: "Rappresenta il sesso dei pazienti prenotabili nella fascia
                              ammessi: M-> Maschile, F-> Femminile."
                          slotMaxQuantity:
                            type: number
                            description: Numero massimo di appuntamenti prenotabili sul singolo slot (salvo
                              overbook)
                          startTime:
                            type: string
                            description: Ora di inizio della fascia in formato Unix epoch
                          supplyModes:
                            type: array
                            description: Lista dei regimi di erogazione permessi per la fascia
                            items:
                              type: object
                              properties:
                                lastUpdate:
                                  type: string
                                  description: Data/ora ultimo aggiornamento in formato Unix epoch
                                maxQuantity:
                                  type: number
                                  description: Quantita' massima di slots con determinato regime permessi
                                    (raggiunto MAX, non permette nuovi
                                    appuntamenti)
                                minQuantity:
                                  type: number
                                  description: Quantita' minima di slots con determinato regime prevista (riserva
                                    MIN posti ad un determinato regime)
                                quantityExpire:
                                  type: number
                                  description: Giorni a partire da oggi in cui i vincoli min/max iniziano ad avere
                                    effetto
                                supplyModeId:
                                  type: string
                                  description: Id del regime di erogazione
                                timebandId:
                                  type: string
                                  description: Id della fascia di riferimento (corrisponde a quella corrente). Da
                                    lasciare vuoto in fase di creazione fascia.
                              required:
                                - lastUpdate
                                - supplyModeId
                          weekday:
                            type: number
                        required:
                          - endTime
                          - maxQuantity
                          - orders
                          - priorityClasses
                          - startTime
                          - supplyModes
                          - weekday
                    weekDays:
                      type: array
                      items:
                        type: number
                        description: Lista dei giorni della settimana previsti per la struttura. (1=LUN,
                          7=DOM)
                  required:
                    - endDate
                    - extra
                    - slotStartTime
                    - startDate
                    - schemaSlotSize
                    - timebands
                interni:
                  type: object
                  description: Oggetto contenente i campi interni da restituire alla struttura
                    sanitaria
              required:
                - executionUnit
                - diaries
                - schemas
        required: true
      responses:
        "200":
          description: Default Response
  "/api/cup/schemas/{schemaId}":
    put:
      summary: Effettua l'aggiornamento della struttura effettuando la disabilitazione
        e successivamente all'aggiornamento dell'agenda questa viene riabilitata
      tags:
        - Cup
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                diaryId:
                  type: string
                  description: Identificativo agenda a cui e' legata questa struttura.
                executionUnitId:
                  type: string
                  description: Identificativo unita' erogante a cui e' legata l'agenda di questa
                    struttura.
                endDate:
                  type: string
                  description: Data di fine validita' della struttura in formato Unix epoch
                extra:
                  type: boolean
                  description: Se true, si tratta di una struttura con extra slot disponibili.
                slotStartTime:
                  type: string
                  description: Ora di inizio degli slot di disponibilita' in formato Unix epoch
                startDate:
                  type: string
                  description: Data di inizio validita' della struttura in formato Unix epoch
                schemaSlotSize:
                  type: integer
                  description: Dimensioni dello slot in minuti.
                timebands:
                  type: array
                  description: Fasce associate a questa struttura.
                  items:
                    type: object
                    properties:
                      endTime:
                        type: string
                        description: Ora di fine della fascia in formato Unix epoch
                      maxQuantity:
                        type: integer
                        description: Numero massimo di slots prenotabili nella fascia.
                      orders:
                        type: array
                        description: Lista delle prestazioni prenotabili nella fascia.
                        items:
                          type: object
                          properties:
                            duration:
                              type: integer
                              description: Tempo necessario per l'esecuzione della prestazione
                            id:
                              type: string
                              description: Id della prestazione
                            priorityClasses:
                              type: array
                              items:
                                type: string
                              description: Lista identificativi delle priorita' con la quale e' possibile
                                erogare questa prestazione
                            supplyModes:
                              type: array
                              items:
                                type: string
                              description: Lista identificativi dei regimi di erogazione con la quale e'
                                possibile erogare questa prestazione
                          required:
                            - duration
                            - id
                            - priorityClasses
                            - supplyModes
                      priorityClasses:
                        type: array
                        items:
                          type: string
                        description: Lista id priorita'
                      startTime:
                        type: string
                        description: Ora di inizio della fascia in formato Unix epoch
                      supplyModes:
                        type: array
                        description: Lista dei regimi di erogazione permessi per la fascia
                        items:
                          type: object
                          properties:
                            lastUpdate:
                              type: string
                              description: Data/ora ultimo aggiornamento
                            supplyModeId:
                              type: string
                              description: Id del regime di erogazione
                          required:
                            - lastUpdate
                            - supplyModeId
                      weekday:
                        type: integer
                        description: Giorno della settimana. (1=LUN, 7=DOM)
                    required:
                      - endTime
                      - maxQuantity
                      - orders
                      - priorityClasses
                      - startTime
                      - supplyModes
                      - weekday
              required:
                - diaryId
                - executionUnitId
                - endDate
                - extra
                - slotStartTime
                - startDate
                - schemaSlotSize
                - timebands
        required: true
      parameters:
        - schema:
            type: string
            minLength: 1
          in: path
          name: schemaId
          required: true
          description: Identificativo della struttura dell'agenda
      responses:
        "200":
          description: Default Response
  /api/cup/structure:
    get:
      summary: Restituisce la struttura gerarchica dell'azienda
      tags:
        - Cup
      responses:
        "200":
          description: Default Response
          content:
            application/json:
              schema:
                type: object
                properties:
                  authority:
                    type: object
                    properties:
                      id:
                        type: string
                        description: Identificativo dell'authority
                      name:
                        type: string
                        description: Nome dell'authority
                      hospital:
                        type: array
                        description: Lista degli ospedali
                        items:
                          type: object
                          properties:
                            id:
                              type: string
                              description: Identificativo dell'ospedale
                            name:
                              type: string
                              description: Nome dell'ospedale
                            sites:
                              type: array
                              description: Lista delle sedi
                              items:
                                type: object
                                properties:
                                  id:
                                    type: string
                                    description: Identificativo della sede
                                  name:
                                    type: string
                                    description: Nome della sede
                                  operationUnits:
                                    type: array
                                    description: Lista delle unita' operative
                                    items:
                                      type: object
                                      properties:
                                        id:
                                          type: string
                                          description: Identificativo dell'unita' operativa
                                        name:
                                          type: string
                                          description: Nome dell'unita' operativa
                                        executionUnits:
                                          type: array
                                          description: Lista delle unita' esecutive
                                          items:
                                            type: object
                                            properties:
                                              id:
                                                type: string
                                                description: Identificativo dell'unita' esecutiva
                                              name:
                                                type: string
                                                description: Nome dell'unita' esecutiva
                                              diaries:
                                                type: array
                                                description: Lista delle agende
                                                items:
                                                  type: object
                                                  properties:
                                                    id:
                                                      type: string
                                                      description: Identificativo dell'agenda
                                                    name:
                                                      type: string
                                                      description: Nome dell'agenda
  /api/cup/suspension:
    post:
      summary: Inserimento di una sospensione
      tags:
        - Cup
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                allDiaries:
                  type: boolean
                  description: Indica se applicare la sospensione a tutte le agende dell'unita'
                    erogante.
                diariesId:
                  type: array
                  description: Lista identificativi agende su cui applicare la sospensione.
                    Obbligatorio se allDiaries e' false.
                  items:
                    type: string
                disableReasonId:
                  type: string
                  description: Identificativo motivazione disattivazione della sospensione.
                reasonId:
                  type: string
                  description: Identificativo motivazione della sospensione.
                siteId:
                  type: string
                  description: Id sede
                unitId:
                  type: string
                  description: Id unita' erogante
                toDate:
                  type: string
                  description: Data di fine della sospensione in formato Unix epoch
                toTime:
                  type: string
                  description: Ora di fine della sospensione.
                fromDate:
                  type: string
                  description: Data di inizio della sospensione in formato Unix epoch
                fromTime:
                  type: string
                  description: Ora di inizio della sospensione.
                status:
                  type: number
                  description: "Stato della sospensione: 0-> ABILITATA, 1-> DISABILITATA, 2->
                    ELIMINATA"
                operationUnitId:
                  type: string
                  description: Id unita' operativa
                suspBookings:
                  description: Indica se sospendere gli appuntamenti esistenti all'atto di
                    creazione/aggiornamento della sospensione.
                  type: boolean
                weekdayMask:
                  type: integer
                  description: "Bitmask dei giorni della settimana: Lunedì = 1, Martedì = 2,
                    Mercoledì = 4, Giovedì = 8, Venerdì = 16, Sabato = 32,
                    Domenica = 64"
              required:
                - allDiaries
                - diariesId
                - disableReasonId
                - reasonId
                - siteId
                - unitId
                - toDate
                - fromDate
                - operationUnitId
                - weekdayMask
        required: true
      responses:
        "200":
          description: Default Response
  "/api/cup/suspension/{suspensionId}":
    put:
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                allDiaries:
                  type: boolean
                  description: Indica se applicare la sospensione a tutte le agende dell'unita'
                    erogante.
                diariesId:
                  type: array
                  items:
                    type: string
                  description: Lista identificativi agende su cui applicare la sospensione.
                    Obbligatorio se allDiaries e' FALSE.
                disableReasonId:
                  type: string
                  description: "Identificativo motivazione disattivazione della sospensione. Vedi
                    schema ReasonR.id recuperato da GET:
                    /api/v3/system-apis/reasons"
                fromDate:
                  type: string
                  description: Data di inizio della sospensione.
                fromTime:
                  type: string
                  description: Ora di inizio della sospensione.
                id:
                  type: integer
                  description: Identificativo della sospensione, obbligatorio per le chiamate di
                    aggiornamento (PUT)
                notes:
                  type: string
                  description: Note della sospensione.
                operationUnitId:
                  type: string
                  description: "Id unita' operativa vedi schema OperationUnitR.id recuperato da
                    GET: /api/v3/system-apis/operationunits"
                ordersId:
                  type: array
                  items:
                    type: string
                  description: "Lista identificativi delle prestazioni su cui l'indisponibilita'
                    agisce. Se vuota, considera tutte le prestazioni. Vedi
                    schema HealthcareServiceR.id recuperato da GET:
                    /api/v3/system-apis/healthcareservices"
                reasonId:
                  type: string
                  description: "Identificativo motivazione della sospensione. Vedi schema
                    ReasonR.id recuperato da GET: /api/v3/system-apis/reasons"
                siteId:
                  type: string
                  description: "Id sede vedi schema HospitalR.id recuperato da GET:
                    /api/v3/system-apis/sites"
                status:
                  type: integer
                  description: "Stato della sospensione: 0-> ABILITATA, 1-> DISABILITATA, 2->
                    ELIMINATA"
                suspBookings:
                  type: boolean
                  description: Indica se sospendere gli appuntamenti esistenti all'atto di
                    creazione/aggiornamento della sospensione.
                toDate:
                  type: string
                  description: Data di fine della sospensione.
                toTime:
                  type: string
                  description: Ora di fine della sospensione.
                unitId:
                  type: string
                  description: "Id unita' erogante vedi schema ExecutionUnitR.id recuperato da
                    GET: /api/v3/system-apis/executionunits"
                weekdayMask:
                  type: integer
                  description: "Bitmask dei giorni della settimana: Lunedì = 1, Martedì = 2,
                    Mercoledì = 4, Giovedì = 8, Venerdì = 16, Sabato = 32,
                    Domenica = 64"
              required:
                - fromDate
                - operationUnitId
                - reasonId
                - siteId
                - toDate
                - unitId
        required: true
      responses:
        "200":
          description: Default Response
  /api/v4/process-apis/booking-management/bookings/notification:
    post:
      tags:
        - Incoming V4
      responses:
        "200":
          description: Default Response
  /api/v4/process-apis/booking-management/pre-bookings/notification:
    post:
      tags:
        - Incoming V4
      responses:
        "200":
          description: Default Response
  "/api/v4/process-apis/booking-management/bookings/{bookingCode}":
    delete:
      tags:
        - Incoming V4
      parameters:
        - schema:
            type: string
            minLength: 1
          in: path
          name: bookingCode
          required: true
      responses:
        "200":
          description: Default Response
  /api/v4/process-apis/booking-management/bookings:
    post:
      tags:
        - Incoming V4
      responses:
        "200":
          description: Default Response
  /api/v4/admission:
    post:
      summary: Notifica di accettazione
      tags:
        - Outgoing V4
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                admissionTypeId:
                  type: string
                  description: Id tipologia di accettazione
                details:
                  type: array
                  description: Elenco dettagli prestazioni
                  items:
                    type: object
                    properties:
                      bookingCode:
                        type: string
                        description: Eventuale codice della prenotazione
                      executionDatetime:
                        type: string
                        description: Data/ora erogazione della prestazione in formato Unix epoch
                      scheduledDatetime:
                        type: string
                        description: Data/ora di presunta erogazione in formato Unix epoch
                      bookingDate:
                        type: string
                      phoneNumber:
                        type: string
                        description: Numero di telefono paziente per eventuali comunicazioni,
                          obbligatorio se assente reasonDenyPhoneNumber
                      quantity:
                        type: number
                        description: Quantita'
                      reasonDenyPhoneNumber:
                        type: string
                        description: Motivazione indisponibilità numero di telefono
                      serviceCode:
                        type: string
                        description: Codice prestazione
                      specializationCode:
                        type: string
                        description: Branca della prestazione
                    required:
                      - executionDatetime
                      - scheduledDatetime
                      - serviceCode
                directEntry:
                  type: boolean
                  description: Flag per indicare se accesso diretto
                executionUnitId:
                  type: string
                  description: Identificativo di sistema dell'unità erogante
                personIdentifier:
                  type: string
                  description: "Codice Identificativo della persona: CF, ENI o STP"
                prescription:
                  type: object
                  description: Informazioni relative alla ricetta
                  properties:
                    compilationDatetime:
                      type: number
                      description: Data compilazione ricetta in formato Unix epoch
                    diagnosisCode:
                      type: string
                      description: Codice dell'eventuale diagnosi
                    doctorIdentifier:
                      type: string
                      description: Codice fiscale medico che ha emesso la ricetta
                    doctorType:
                      type: string
                      description: Tipologia del medico
                    exemptionCode:
                      type: string
                      description: Identificativo ministeriale dell'eventuale esenzione
                    nreAccessType:
                      type: string
                      enum:
                        - ACCESSO_SUCCESSIVO
                        - PRIMO_ACCESSO
                      description: Tipo di accesso
                    prescriptionNumber:
                      type: string
                      description: Numero ricetta
                    priorityClass:
                      type: string
                      enum:
                        - B
                        - D
                        - P
                        - U
                      description: Classe di priorita' della ricetta
                  required:
                    - compilationDatetime
                    - doctorType
                    - priorityClass
                prescriptionNRE:
                  type: string
                  description: Numero di ricetta elettronica, obbligatorio se assente l'oggetto
                    prescription
                site:
                  type: object
                  description: Informazioni della sede
                  properties:
                    identifiedBy:
                      type: string
                      description: Campo per indicare tipologia di indentificazione della sede
                    identifier:
                      type: string
                      description: Codice identificativo della sede
                  required:
                    - identifiedBy
                    - identifier
                supplyModeCategoryId:
                  type: string
                  description: Id categoria regime di erogazione.
              required:
                - admissionTypeId
                - details
                - personIdentifier
                - site
                - supplyModeCategoryId
        required: true
      responses:
        "200":
          description: Default Response
    patch:
      summary: Modifica lo stato dell'accettazione
      tags:
        - Outgoing V4
      requestBody:
        content:
          application/json:
            schema:
              type: array
              items:
                type: object
                properties:
                  admissionIdentification:
                    type: object
                    description: Rappresenta il tipo di codice identificativo e lo stesso codice
                      utilizzati per identificare un'accettazione.
                    properties:
                      identifiedBy:
                        type: string
                        enum:
                          - CODICE_ACCETTAZIONE
                          - NUMERO_RICETTA
                        description: Tipo di codice con cui identificare l'accettazione.
                      identifier:
                        type: string
                        description: Identificativo dell'accettazione. Varia in base al tipo di
                          identificativo scelto nel campo identifiedBy
                    required:
                      - identifiedBy
                      - identifier
                  admissionStatus:
                    type: string
                    enum:
                      - DA_EROGARE
                      - ELIMINATA
                      - EROGATA
                      - NON_EROGATA
                      - PRESCRITTA
                    description: Nuovo stato da assegnare all'accettazione.
                  reasonId:
                    type: integer
                    description: Identificativo motivazione del cambio di stato. Necessaria solo nel
                      caso di stato NON_EROGATA.
                required:
                  - admissionStatus
      responses:
        "200":
          description: Default Response
  /api/v4/orders:
    patch:
      summary: Modifica stato di un ordine
      tags:
        - Outgoing V4
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                orderId:
                  type: number
                  description: Id di sistema con cui identificare l’ordine. Un ordine può essere
                    creato a partire da un’accettazione diretta o da un
                    appuntamento. per ottenere questo tipo di identificativo si
                    consigli si usare i microservizi di competenza
                orderStatus:
                  type: string
                  enum:
                    - ACCETTATO
                    - ANNULLATO
                    - EROGATO
                    - NON_EROGATO
                  description: Stato da assegnare all'ordine (EROGATO, ANNULLATO, ACCETTATO,
                    NON_EROGATO)
                reasonId:
                  type: string
                  description: Identificativo motivazione del cambio di stato. Necessaria solo nel
                    caso di stato NON_EROGATA
              required:
                - orderId
                - orderStatus
        required: true
      responses:
        "200":
          description: Default Response
  /api/log/groups/:
    get:
      responses: {}
  /api/log/infologs/:
    get:
      parameters:
        - schema:
            type: string
          in: query
          name: idGruppo
          required: true
        - schema:
            type: string
            format: date-time
          in: query
          name: dataInizio
          required: false
        - schema:
            type: string
            format: date-time
          in: query
          name: dataFine
          required: false
        - schema:
            type: integer
            minimum: 0
          in: query
          name: offset
          required: true
        - schema:
            type: integer
            minimum: 1
            maximum: 100
          in: query
          name: limit
          required: true
        - schema:
            type: string
          in: query
          name: string
          required: false
      responses:
        "200":
          description: Default Response
          content:
            application/json:
              schema:
                type: object
                properties:
                  error:
                    type: boolean
                    default: false
                  code:
                    type: string
                    default: ""
                  msg:
                    type: string
                    default: ok
                  data:
                    nullable: true
                    type: object
                    properties:
                      totalRecords:
                        type: integer
                      records:
                        type: array
                        items:
                          type: object
                          properties:
                            sezione:
                              type: string
                            idGruppo:
                              type: string
                              nullable: true
                            descrizioneEvento:
                              type: string
                            username:
                              type: string
                            ip:
                              type: string
                            userAgent:
                              type: string
                              nullable: true
                            stato:
                              type: string
                            idRisorsa:
                              type: string
                              nullable: true
                            operation:
                              type: string
                            dataOra:
                              type: string
                              format: date-time
                              nullable: true
  /api/log/infologs/success:
    get:
      parameters:
        - schema:
            type: string
          in: query
          name: idGruppo
          required: true
        - schema:
            type: string
            format: date-time
          in: query
          name: dataInizio
          required: false
        - schema:
            type: string
            format: date-time
          in: query
          name: dataFine
          required: false
        - schema:
            type: integer
            minimum: 0
          in: query
          name: offset
          required: true
        - schema:
            type: integer
            minimum: 1
            maximum: 100
          in: query
          name: limit
          required: true
        - schema:
            type: string
          in: query
          name: string
          required: false
      responses:
        "200":
          description: Default Response
          content:
            application/json:
              schema:
                type: object
                properties:
                  error:
                    type: boolean
                    default: false
                  code:
                    type: string
                    default: ""
                  msg:
                    type: string
                    default: ok
                  data:
                    nullable: true
                    type: object
                    properties:
                      totalRecords:
                        type: integer
                      records:
                        type: array
                        items:
                          type: object
                          properties:
                            sezione:
                              type: string
                            operation:
                              type: string
                            idGruppo:
                              type: string
                              nullable: true
                            descrizioneEvento:
                              type: string
                            dataOra:
                              type: string
                              format: date-time
                              nullable: true
  /api/log/infologs/successAgenda:
    get:
      parameters:
        - schema:
            type: string
          in: query
          name: idGruppo
          required: true
        - schema:
            type: string
            format: date-time
          in: query
          name: dataInizio
          required: false
        - schema:
            type: string
            format: date-time
          in: query
          name: dataFine
          required: false
        - schema:
            type: integer
            minimum: 0
          in: query
          name: offset
          required: true
        - schema:
            type: integer
            minimum: 1
            maximum: 100
          in: query
          name: limit
          required: true
        - schema:
            type: string
          in: query
          name: string
          required: false
      responses:
        "200":
          description: Default Response
          content:
            application/json:
              schema:
                type: object
                properties:
                  error:
                    type: boolean
                    default: false
                  code:
                    type: string
                    default: ""
                  msg:
                    type: string
                    default: ok
                  data:
                    nullable: true
                    type: object
                    properties:
                      totalRecords:
                        type: integer
                      records:
                        type: array
                        items:
                          type: object
                          properties:
                            sezione:
                              type: string
                            operation:
                              type: string
                            idGruppo:
                              type: string
                              nullable: true
                            descrizioneEvento:
                              type: string
                            dataOra:
                              type: string
                              format: date-time
                              nullable: true
  /api/log/infologs/statistics:
    get:
      parameters:
        - schema:
            type: string
          in: query
          name: idGruppo
          required: true
        - schema:
            type: string
            format: date-time
          in: query
          name: dataInizio
          required: false
        - schema:
            type: string
            format: date-time
          in: query
          name: dataFine
          required: false
      responses: {}
  /api/log/login/:
    post:
      requestBody:
        content:
          application/json:
            schema:
              type: object
              additionalProperties: false
              properties:
                username:
                  type: string
                password:
                  type: string
              required:
                - username
                - password
        required: true
      responses:
        "200":
          description: Default Response
          content:
            application/json:
              schema:
                type: object
                properties:
                  error:
                    type: boolean
                    default: false
                  code:
                    type: string
                    default: ""
                  msg:
                    type: string
                    default: ok
                  data:
                    nullable: true
                    type: object
                    properties:
                      token:
                        type: string
                      ruolo:
                        type: string
                        enum:
                          - ADMIN
                          - READ_OPERATOR
                          - DEVELOPER
  /api/log/roles/:
    get:
      responses:
        "200":
          description: Default Response
          content:
            application/json:
              schema:
                type: object
                properties:
                  error:
                    type: boolean
                    default: false
                  code:
                    type: string
                    default: ""
                  msg:
                    type: string
                    default: ok
                  data:
                    nullable: true
                    type: array
                    items:
                      type: string
                    examples:
                      ADMIN:
                        value: ADMIN
                      READ_OPERATOR:
                        value: READ_OPERATOR
                      DEVELOPER:
                        value: DEVELOPER
  /api/log/structures/:
    get:
      parameters:
        - schema:
            type: integer
            minimum: 0
          in: query
          name: offset
          required: true
        - schema:
            type: integer
            maximum: 100
          in: query
          name: limit
          required: true
        - schema:
            type: string
            maxLength: 50
            default: ""
          in: query
          name: search
          required: false
      responses:
        "200":
          description: Default Response
          content:
            application/json:
              schema:
                type: object
                properties:
                  error:
                    type: boolean
                    default: false
                  code:
                    type: string
                    default: ""
                  msg:
                    type: string
                    default: ok
                  data:
                    nullable: true
                    type: object
                    properties:
                      totalRecords:
                        type: integer
                      records:
                        type: array
                        items:
                          type: object
                          properties:
                            name:
                              type: string
                            azienda:
                              type: string
                            clientId:
                              type: string
                            descrizione:
                              type: string
                            nsisCode:
                              type: string
                            endPointPrenotazione:
                              type: string
                            endPointPreAppuntamento:
                              type: string
                            endPointCancellazione:
                              type: string
                            endPointSpostamento:
                              type: string
                            authNotification:
                              type: string
                            endPointRetry:
                              type: string
                            mailStruttura:
                              type: array
                              items:
                                type: string
  /api/log/structures/updateStructure:
    patch:
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                name:
                  type: string
                endPointPrenotazione:
                  type: string
                endPointPreAppuntamento:
                  type: string
                endPointCancellazione:
                  type: string
                endPointSpostamento:
                  type: string
                authNotification:
                  type: string
                endPointRetry:
                  type: string
                mailStruttura:
                  nullable: true
                  type: array
                  items:
                    type: string
              required:
                - name
                - endPointPrenotazione
                - endPointPreAppuntamento
                - endPointCancellazione
                - endPointSpostamento
                - authNotification
                - endPointRetry
                - mailStruttura
        required: true
      responses:
        "200":
          description: Default Response
  /api/log/users/changePwd:
    patch:
      requestBody:
        content:
          application/json:
            schema:
              type: object
              additionalProperties: false
              properties:
                oldPassword:
                  type: string
                newPassword:
                  type: string
              required:
                - oldPassword
                - newPassword
        required: true
      responses:
        "200":
          description: Default Response
  /api/log/users/:
    patch:
      requestBody:
        content:
          application/json:
            schema:
              type: array
              items:
                type: object
                properties:
                  id:
                    type: string
                  attivo:
                    type: boolean
                required:
                  - id
                  - attivo
              minItems: 1
      responses:
        "200":
          description: Default Response
          content:
            application/json:
              schema:
                type: object
                properties:
                  error:
                    type: boolean
                    default: false
                  code:
                    type: string
                    default: ""
                  msg:
                    type: string
                    default: ok
                  data:
                    nullable: true
                    type: array
                    items:
                      type: object
                      properties:
                        id:
                          type: string
                        successUpdate:
                          type: boolean
    post:
      requestBody:
        content:
          application/json:
            schema:
              type: object
              additionalProperties: false
              properties:
                username:
                  type: string
                password:
                  type: string
                idGruppo:
                  type: array
                  items:
                    type: string
                ruolo:
                  type: string
                  enum:
                    - ADMIN
                    - READ_OPERATOR
                    - DEVELOPER
              required:
                - username
                - password
                - ruolo
        required: true
      responses:
        "200":
          description: Default Response
          content:
            application/json:
              schema:
                type: object
                properties:
                  error:
                    type: boolean
                    default: false
                  code:
                    type: string
                    default: ""
                  msg:
                    type: string
                    default: ok
                  data:
                    nullable: true
        "201":
          description: Default Response
          content:
            application/json:
              schema:
                type: object
                properties:
                  id:
                    type: string
                  username:
                    type: string
                  idGruppo:
                    type: array
                    items:
                      type: string
                  ruolo:
                    nullable: true
                    type: string
                    enum:
                      - ADMIN
                      - READ_OPERATOR
                      - DEVELOPER
    get:
      parameters:
        - schema:
            type: integer
            minimum: 0
          in: query
          name: offset
          required: true
        - schema:
            type: integer
            maximum: 100
          in: query
          name: limit
          required: true
        - schema:
            type: string
            maxLength: 50
            default: ""
          in: query
          name: search
          required: false
      responses:
        "200":
          description: Default Response
          content:
            application/json:
              schema:
                type: object
                properties:
                  error:
                    type: boolean
                    default: false
                  code:
                    type: string
                    default: ""
                  msg:
                    type: string
                    default: ok
                  data:
                    nullable: true
                    type: object
                    properties:
                      totalRecords:
                        type: integer
                      records:
                        type: array
                        items:
                          type: object
                          properties:
                            _id:
                              type: string
                            username:
                              type: string
                            idGruppo:
                              type: array
                              items:
                                type: string
                            ruolo:
                              type: string
                            attivo:
                              type: boolean
  "/api/log/users/{idUser}":
    delete:
      parameters:
        - schema:
            type: string
          in: path
          name: idUser
          required: true
      responses:
        "200":
          description: Default Response
  "/api/log/users/updateUser/{idUser}":
    patch:
      requestBody:
        content:
          application/json:
            schema:
              type: object
              additionalProperties: false
              properties:
                username:
                  type: string
                password:
                  type: string
                idGruppo:
                  type: array
                  items:
                    type: string
                ruolo:
                  type: string
                  enum:
                    - ADMIN
                    - READ_OPERATOR
                    - DEVELOPER
              required:
                - username
                - password
                - ruolo
        required: true
      parameters:
        - schema:
            type: string
          in: path
          name: idUser
          required: true
      responses:
        "200":
          description: Default Response
          content:
            application/json:
              schema:
                type: object
                properties:
                  id:
                    type: string
                  username:
                    type: string
                  idGruppo:
                    type: array
                    items:
                      type: string
                  ruolo:
                    nullable: true
                    type: string
                    enum:
                      - ADMIN
                      - READ_OPERATOR
                      - DEVELOPER
tags:
  - name: Cup
    description: API di configurazione delle strutture sul CUP regionale
  - name: Incoming V4
    description: API di notifiche dal CUP regionale
  - name: Outgoing V4
    description: API di notifiche verso il CUP regionale
