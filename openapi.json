openapi: 3.0.3
info:
  title: Privati Akkredidati
  description: Middleware per la comunicazione con il cup regionale. Per
    effettuare le request inserire la versione (es. 1.0.0) nel campo header
    Accept-Version
  version: 1.0.0
components:
  schemas: {}
paths:
  "/api/cup/{diaryId}":
    put:
      summary: Aggiornamento dell'agenda
      tags:
        - Cup
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                diaries:
                  type: object
                  properties:
                    accessModeId:
                      type: integer
                      description: "Tipologia di accesso: -1-> non applicabile, 0-> a piedi, 1-> in
                        macchina"
                    accessTypeId:
                      type: integer
                      description: "Tipologia accesso agenda: 1-> Primo accesso, 0-> Accesso
                        successivo, -1-> Entrambi"
                    allCovers:
                      type: boolean
                      description: Indica se associare tutte le coperture economiche disponibili. Se
                        false, considera il campo coverIds.
                    authorityId:
                      type: string
                      description: Id ente
                    availabilityDelay:
                      type: integer
                      description: L'agenda mostra disponibilita' a partire da AVAILABILITY_DELAY
                        (ORE) da adesso.
                    code:
                      type: string
                      description: Codice agenda
                    defaultFreeBookingDate:
                      type: boolean
                      description: Imposta data default in forzatura libera
                    defOrderDurationMins:
                      type: integer
                      description: Durata di default in minuti delle nuove prestazioni aggiunte
                        all'agenda
                    diarySupplyModes:
                      type: array
                      description: Lista di regimi per l'agenda con indicazione del listino
                      items:
                        type: object
                        properties:
                          costCenter:
                            type: string
                            description: Id del Centro di costo collegato al regime agenda.
                          supplyModeId:
                            type: string
                            description: Id del regime
                          endDate:
                            type: string
                            description: Data di fine validità del regime per l'agenda in formato Unix epoch
                          startDate:
                            type: string
                            description: Data di inizio validità del regime per l'agenda in formato Unix
                              epoch
                          diaryId:
                            type: string
                            description: Id dell'agenda collegata al regime (corrisponde a quella corrente).
                              Da lasciare vuoto in fase di creazione.
                        required:
                          - costCenter
                          - supplyModeId
                          - endDate
                          - startDate
                    executionUnitId:
                      type: string
                      description: Id unita' erogante
                    hospitalId:
                      type: string
                      description: Id presidio
                    operationUnitId:
                      type: string
                      description: Id unita' operativa
                    siteId:
                      type: string
                      description: Id sede
                    forResidents:
                      type: boolean
                      description: true se l'agenda e' riservabile per i residenti
                    freeForceEnabled:
                      type: boolean
                      description: Indica se l'agenda è abilitata per effettuare la forzatura libera
                    freeForceNotesNeeded:
                      type: boolean
                      description: Identifica se le note in forzatura libera sono obbligatorie
                    name:
                      type: string
                      description: Nome agenda
                    onlyAdjacentSlots:
                      type: boolean
                      description: Se true, la prenotazione avviene solo su slots consecutivi.
                    orders:
                      type: array
                      description: Lista delle prestazioni associate all'agenda
                      items:
                        type: object
                        properties:
                          duration:
                            type: integer
                            description: Tempo necessario per l'esecuzione della prestazione
                          id:
                            type: string
                            description: Id della prestazione
                        required:
                          - duration
                          - id
                    priorityClasses:
                      type: array
                      items:
                        type: string
                      description: Lista id priorita'
                    privateFlag:
                      type: boolean
                      description: Indica se l'agenda non deve essere mostrata in disponibilita' a
                        meno che l'operatore non sia abilitato puntualmente
                    reminderAnonymization:
                      type: boolean
                      description: Indica se il promemoria per l'assistito sara' senza dati sensibili
                        del paziente
                    supplyModes:
                      type: array
                      items:
                        type: integer
                      description: Lista degli identificativi dei regimi di erogazione
                    slotSize:
                      type: integer
                      description: Grandezza dello slot espressa in minuti
                    typeId:
                      type: integer
                      description: "Tipo agenda: 1-> visita, 2-> tecnica, 3-> laboratorio"
                    visibility:
                      type: integer
                      description: Giorni di visibilita' agenda
                  required:
                    - accessModeId
                    - accessTypeId
                    - allCovers
                    - authorityId
                    - defaultFreeBookingDate
                    - defOrderDurationMins
                    - diarySupplyModes
                    - executionUnitId
                    - hospitalId
                    - operationUnitId
                    - siteId
                    - forResidents
                    - freeForceEnabled
                    - freeForceNotesNeeded
                    - name
                    - onlyAdjacentSlots
                    - orders
                    - priorityClasses
                    - privateFlag
                    - reminderAnonymization
                    - supplyModes
                    - slotSize
                    - typeId
                    - visibility
              required:
                - diaries
        required: true
      parameters:
        - schema:
            type: string
            minLength: 1
          in: path
          name: diaryId
          required: true
          description: Id di sistema dell'agenda da modificare
      responses:
        "200":
          description: Default Response
  /api/cup/:
    put:
      summary: API per l'aggiornamento delle unità eroganti
      tags:
        - Cup
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                executionUnit:
                  type: object
                  description: Oggetto dell'unità erogante
                  properties:
                    doctors:
                      type: array
                      description: Lista di dottori
                      items:
                        type: object
                        properties:
                          endDate:
                            type: string
                            description: Data di fine Unix epoch
                          startDate:
                            type: string
                            description: Data di inizio di Unix epoch
                          fiscalCode:
                            type: string
                            description: Codice fiscale del dottore appartenete all'unita' erogante
                          isPrimary:
                            type: boolean
                            description: è primario?
                          roleCode:
                            type: string
                            description: Ruolo dottore appartenente all'unita' erogante
                        required:
                          - endDate
                          - startDate
                          - fiscalCode
                          - roleCode
                    registry:
                      type: object
                      properties:
                        automaticSupply:
                          type: boolean
                          description: Unità abilitata all'erogazione in fase di accettazione
                        code:
                          type: string
                          description: Codice unita' erogante
                        description:
                          type: string
                          description: Descrizione unita' erogante
                        directAdmission:
                          type: boolean
                          description: Unità abilitata all'accettazione senza prenotazione
                        endDate:
                          type: string
                          description: Data Fine validità Unita' Erogante
                        id:
                          type: string
                          description: Id unita' erogante
                        name:
                          type: string
                          description: Nome unita' erogante
                        idOperationUnit:
                          type: string
                          description: Id Unita' Operativa
                        notes:
                          type: string
                          description: Note per l'unita' erogante
                        place:
                          type: string
                          description: Indirizzo Unita' Erogante
                        specialization:
                          type: string
                          description: Branca unita' erogante
                        startDate:
                          type: string
                          description: Data Inizio validità Unita' Erogante
                        supplyModes:
                          type: array
                          description: Regimi di erogazione con relativo centro di costo
                          items:
                            type: object
                            properties:
                              costCenterId:
                                type: string
                                description: Id del centro di costo, associato al regime di erogazione
                              supplyModeType:
                                type: string
                                description: Regime di erogazione
                            required:
                              - costCenterId
                              - supplyModeType
                        type:
                          type: string
                          enum:
                            - AMBULATORIO
                            - LABORATORIO
                            - RADIOLOGIA
                          description: Tipo unita' erogante
                      required:
                        - description
                        - endDate
                        - id
                        - name
                        - idOperationUnit
                        - specialization
                        - startDate
                        - supplyModes
                        - type
                    services:
                      type: array
                      description: Prestazioni unita' erogante
                      items:
                        type: object
                        properties:
                          endDate:
                            type: string
                            description: Data di fine validità prestazione
                          startDate:
                            type: string
                            description: Data di inizio validità prestazione
                          cur:
                            type: string
                            description: Codice catalogo unico regionale della prestazione
                          regionalNomenclatureCode:
                            type: string
                            description: Codice nomenclatore regionale della prestazione
                        required:
                          - endDate
                          - startDate
                          - cur
                          - regionalNomenclatureCode
                  required:
                    - doctors
                    - registry
                    - services
              required:
                - executionUnit
        required: true
      responses:
        "200":
          description: Default Response
  /api/cup/root:
    post:
      summary: Creazione/aggiornamento dell'unita' erogante effettuando anche la
        creazione dell'agenda e la creazione/aggiornamento della struttura
        dell'agenda
      tags:
        - Cup
      requestBody:
        content:
          application/json:
            schema:
              type: object
              additionalProperties: false
              properties:
                executionUnit:
                  type: object
                  description: Unita' erogante
                  properties:
                    doctors:
                      type: array
                      description: Lista dei dottori
                      items:
                        type: object
                        properties:
                          endDate:
                            type: string
                            description: Fine validita' del dottore in formato Unix epoch
                          startDate:
                            type: string
                            description: Inizio validita' del dottore in formato Unix epoch
                          fiscalCode:
                            type: string
                            description: Codice fiscale del dottore
                        required:
                          - endDate
                          - startDate
                          - fiscalCode
                    registry:
                      type: object
                      properties:
                        description:
                          type: string
                          description: Descrizione dell'unità erogante
                        endDate:
                          type: string
                          description: Fine validita' dell'unita' erogante
                        name:
                          type: string
                          description: Nome dell'unita' erogante
                        idOperationUnit:
                          type: string
                          description: Id Unita' Operativa
                        specialization:
                          type: string
                          description: Branca unita' erogante
                        startDate:
                          type: string
                          description: Data Inizio validità Unita' Erogante in formato Unix epoch
                        supplyModes:
                          type: array
                          description: Regimi di erogazione con relativo centro di costo
                          items:
                            type: object
                            properties:
                              costCenterId:
                                type: string
                                description: Id del centro di costo, associato al regime di erogazione
                              supplyModeType:
                                type: string
                                description: Regime di erogazione
                            required:
                              - costCenterId
                              - supplyModeType
                        type:
                          type: string
                          description: Tipo unita' erogante
                      required:
                        - description
                        - endDate
                        - name
                        - idOperationUnit
                        - specialization
                        - startDate
                        - supplyModes
                        - type
                    services:
                      type: array
                      description: Prestazioni unita' erogante
                      items:
                        type: object
                        properties:
                          endDate:
                            type: string
                            description: Data di fine validita' prestazione in formato Unix epoch
                          startDate:
                            type: string
                            description: Data di inizio validita' prestazione in formato Unix epoch
                          cur:
                            type: string
                            description: Codice catalogo unico regionale della prestazione
                          regionalNomenclatureCode:
                            type: string
                            description: Codice nomenclatore regionale della prestazione
                        required:
                          - endDate
                          - startDate
                          - cur
                          - regionalNomenclatureCode
                  required:
                    - doctors
                    - registry
                    - services
                diaries:
                  type: object
                  properties:
                    accessModeId:
                      type: integer
                      description: "Tipologia di accesso: -1-> non applicabile, 0-> a piedi, 1-> in
                        macchina"
                    accessTypeId:
                      type: integer
                      description: "Tipologia accesso agenda: 1-> Primo accesso, 0-> Accesso
                        successivo, -1-> Entrambi"
                    allCovers:
                      type: boolean
                      description: Indica se associare tutte le coperture economiche disponibili. Se
                        false, considera il campo coverIds.
                    defaultFreeBookingDate:
                      type: boolean
                      description: Imposta data default in forzatura libera
                    defOrderDurationMins:
                      type: integer
                      description: Durata di default in minuti delle nuove prestazioni aggiunte
                        all'agenda
                    diarySupplyModes:
                      type: array
                      description: Lista di regimi per l'agenda con indicazione del listino
                      items:
                        type: object
                        properties:
                          costCenter:
                            type: string
                            description: Id del Centro di costo collegato al regime agenda.
                          supplyModeId:
                            type: string
                            description: Id del regime
                          endDate:
                            type: string
                            description: Data di fine validità del regime per l'agenda in formato Unix epoch
                          startDate:
                            type: string
                            description: Data di inizio validità del regime per l'agenda in formato Unix
                              epoch
                          diaryId:
                            type: string
                            description: Id dell'agenda collegata al regime (corrisponde a quella corrente).
                              Da lasciare vuoto in fase di creazione.
                        required:
                          - costCenter
                          - supplyModeId
                          - endDate
                          - startDate
                    forResidents:
                      type: boolean
                      description: true se l'agenda e' riservabile per i residenti
                    freeForceEnabled:
                      type: boolean
                      description: Indica se l'agenda è abilitata per effettuare la forzatura libera
                    freeForceNotesNeeded:
                      type: boolean
                      description: Identifica se le note in forzatura libera sono obbligatorie
                    name:
                      type: string
                      description: Nome agenda
                    onlyAdjacentSlots:
                      type: boolean
                      description: Se true, la prenotazione avviene solo su slots consecutivi.
                    orders:
                      type: array
                      description: Lista delle prestazioni associate all'agenda
                      items:
                        type: object
                        properties:
                          duration:
                            type: integer
                            description: Tempo necessario per l'esecuzione della prestazione
                          id:
                            type: string
                            description: Id della prestazione
                        required:
                          - duration
                          - id
                    priorityClasses:
                      type: array
                      items:
                        type: string
                      description: Lista identificativi delle priorita' con la quale e' possibile
                        erogare questa prestazione
                    privateFlag:
                      type: boolean
                      description: Indica se l'agenda non deve essere mostrata in disponibilita' a
                        meno che l'operatore non sia abilitato puntualmente
                    reminderAnonymization:
                      type: boolean
                      description: Indica se il promemoria per l'assistito sara' senza dati sensibili
                        del paziente
                    supplyModes:
                      type: array
                      items:
                        type: string
                      description: Lista degli identificativi dei regimi di erogazione
                    typeId:
                      type: integer
                      description: "Tipo agenda: 1-> visita, 2-> tecnica, 3-> laboratorio"
                    online:
                      type: boolean
                      description: Se true, prestazione prenotabile autonomamente da cittadino (se
                        prevista prenotazione tramite APP Online)
                    extraCup:
                      type: boolean
                      description: Flag che indica se la prestazione e' prenotabile su sistemi
                        integrati
                    visibility:
                      type: integer
                      description: Giorni di visibilita' agenda
                  required:
                    - accessModeId
                    - accessTypeId
                    - allCovers
                    - defaultFreeBookingDate
                    - defOrderDurationMins
                    - diarySupplyModes
                    - forResidents
                    - freeForceEnabled
                    - freeForceNotesNeeded
                    - name
                    - onlyAdjacentSlots
                    - orders
                    - priorityClasses
                    - privateFlag
                    - reminderAnonymization
                    - supplyModes
                    - typeId
                    - visibility
                schemas:
                  type: object
                  description: Struttura dell'agenda
                  properties:
                    id:
                      type: string
                      description: Id dell'agenda, required per le chiamate di aggiornamento
                    endDate:
                      type: string
                      description: Data di fine validita' della struttura in formato Unix epoch
                    status:
                      type: boolean
                      description: Se true, la struttura e' abilitata.
                    extra:
                      type: boolean
                      description: Se true, si tratta di una struttura con extra slot disponibili.
                    slotStartTime:
                      type: string
                      description: Ora di inizio degli slot di disponibilita' in formato Unix epoch
                    startDate:
                      type: string
                      description: Data di inizio validita' della struttura in formato Unix epoch
                    schemaSlotSize:
                      type: integer
                      description: Dimensioni dello slot in minuti.
                    timebands:
                      type: array
                      description: Fasce associate a questa struttura.
                      items:
                        type: object
                        properties:
                          endTime:
                            type: string
                            description: Ora di fine della fascia in formato Unix epoch
                          maxQuantity:
                            type: integer
                            description: Numero massimo di slots prenotabili nella fascia.
                          orders:
                            type: array
                            description: Lista delle prestazioni prenotabili nella fascia.
                            items:
                              type: object
                              properties:
                                duration:
                                  type: integer
                                  description: Tempo necessario per l'esecuzione della prestazione
                                id:
                                  type: string
                                  description: Id della prestazione
                                priorityClasses:
                                  type: array
                                  items:
                                    type: string
                                  description: Lista identificativi delle priorita' con la quale e' possibile
                                    erogare questa prestazione
                                supplyModes:
                                  type: array
                                  items:
                                    type: string
                                  description: Lista identificativi dei regimi di erogazione con la quale e'
                                    possibile erogare questa prestazione
                              required:
                                - duration
                                - id
                                - priorityClasses
                                - supplyModes
                          priorityClasses:
                            type: array
                            items:
                              type: string
                            description: Lista id priorita'
                          startTime:
                            type: string
                            description: Ora di inizio della fascia in formato Unix epoch
                          supplyModes:
                            type: array
                            description: Lista dei regimi di erogazione permessi per la fascia
                            items:
                              type: object
                              properties:
                                lastUpdate:
                                  type: string
                                  description: Data/ora ultimo aggiornamento in formato Unix epoch
                                supplyModeId:
                                  type: string
                                  description: Id del regime di erogazione
                              required:
                                - lastUpdate
                                - supplyModeId
                          weekday:
                            type: number
                        required:
                          - endTime
                          - maxQuantity
                          - orders
                          - priorityClasses
                          - startTime
                          - supplyModes
                          - weekday
                  required:
                    - endDate
                    - extra
                    - slotStartTime
                    - startDate
                    - schemaSlotSize
                    - timebands
                interni:
                  type: object
                  description: Oggetto contenente i campi interni da restituire alla struttura
                    sanitaria
              required:
                - executionUnit
                - diaries
                - schemas
        required: true
      responses:
        "200":
          description: Default Response
  "/api/cup/schemas/{schemaId}":
    put:
      summary: Effettua l'aggiornamento della struttura effettuando la disabilitazione
        e successivamente all'aggiornamento dell'agenda questa viene riabilitata
      tags:
        - Cup
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                diaryId:
                  type: string
                  description: Identificativo agenda a cui e' legata questa struttura.
                executionUnitId:
                  type: string
                  description: Identificativo unita' erogante a cui e' legata l'agenda di questa
                    struttura.
                endDate:
                  type: string
                  description: Data di fine validita' della struttura in formato Unix epoch
                extra:
                  type: boolean
                  description: Se true, si tratta di una struttura con extra slot disponibili.
                slotStartTime:
                  type: string
                  description: Ora di inizio degli slot di disponibilita' in formato Unix epoch
                startDate:
                  type: string
                  description: Data di inizio validita' della struttura in formato Unix epoch
                schemaSlotSize:
                  type: integer
                  description: Dimensioni dello slot in minuti.
                timebands:
                  type: array
                  description: Fasce associate a questa struttura.
                  items:
                    type: object
                    properties:
                      endTime:
                        type: string
                        description: Ora di fine della fascia in formato Unix epoch
                      maxQuantity:
                        type: integer
                        description: Numero massimo di slots prenotabili nella fascia.
                      orders:
                        type: array
                        description: Lista delle prestazioni prenotabili nella fascia.
                        items:
                          type: object
                          properties:
                            duration:
                              type: integer
                              description: Tempo necessario per l'esecuzione della prestazione
                            id:
                              type: string
                              description: Id della prestazione
                            priorityClasses:
                              type: array
                              items:
                                type: string
                              description: Lista identificativi delle priorita' con la quale e' possibile
                                erogare questa prestazione
                            supplyModes:
                              type: array
                              items:
                                type: string
                              description: Lista identificativi dei regimi di erogazione con la quale e'
                                possibile erogare questa prestazione
                          required:
                            - duration
                            - id
                            - priorityClasses
                            - supplyModes
                      priorityClasses:
                        type: array
                        items:
                          type: string
                        description: Lista id priorita'
                      startTime:
                        type: string
                        description: Ora di inizio della fascia in formato Unix epoch
                      supplyModes:
                        type: array
                        description: Lista dei regimi di erogazione permessi per la fascia
                        items:
                          type: object
                          properties:
                            lastUpdate:
                              type: string
                              description: Data/ora ultimo aggiornamento
                            supplyModeId:
                              type: string
                              description: Id del regime di erogazione
                          required:
                            - lastUpdate
                            - supplyModeId
                      weekday:
                        type: integer
                        description: Giorno della settimana. (1=LUN, 7=DOM)
                    required:
                      - endTime
                      - maxQuantity
                      - orders
                      - priorityClasses
                      - startTime
                      - supplyModes
                      - weekday
              required:
                - diaryId
                - executionUnitId
                - endDate
                - extra
                - slotStartTime
                - startDate
                - schemaSlotSize
                - timebands
        required: true
      parameters:
        - schema:
            type: string
            minLength: 1
          in: path
          name: schemaId
          required: true
          description: Identificativo della struttura dell'agenda
      responses:
        "200":
          description: Default Response
  /api/cup/structure:
    get:
      summary: Restituisce la struttura gerarchica dell'azienda
      tags:
        - Cup
      responses:
        "200":
          description: Default Response
          content:
            application/json:
              schema:
                type: object
                properties:
                  authority:
                    type: object
                    properties:
                      id:
                        type: string
                        description: Identificativo dell'authority
                      name:
                        type: string
                        description: Nome dell'authority
                      hospital:
                        type: array
                        description: Lista degli ospedali
                        items:
                          type: object
                          properties:
                            id:
                              type: string
                              description: Identificativo dell'ospedale
                            name:
                              type: string
                              description: Nome dell'ospedale
                            sites:
                              type: array
                              description: Lista delle sedi
                              items:
                                type: object
                                properties:
                                  id:
                                    type: string
                                    description: Identificativo della sede
                                  name:
                                    type: string
                                    description: Nome della sede
                                  operationUnits:
                                    type: array
                                    description: Lista delle unita' operative
                                    items:
                                      type: object
                                      properties:
                                        id:
                                          type: string
                                          description: Identificativo dell'unita' operativa
                                        name:
                                          type: string
                                          description: Nome dell'unita' operativa
                                        executionUnits:
                                          type: array
                                          description: Lista delle unita' esecutive
                                          items:
                                            type: object
                                            properties:
                                              id:
                                                type: string
                                                description: Identificativo dell'unita' esecutiva
                                              name:
                                                type: string
                                                description: Nome dell'unita' esecutiva
                                              diaries:
                                                type: array
                                                description: Lista delle agende
                                                items:
                                                  type: object
                                                  properties:
                                                    id:
                                                      type: string
                                                      description: Identificativo dell'agenda
                                                    name:
                                                      type: string
                                                      description: Nome dell'agenda
  /api/cup/suspension:
    post:
      summary: Inserimento di una sospensione
      tags:
        - Cup
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                allDiaries:
                  type: boolean
                  description: Indica se applicare la sospensione a tutte le agende dell'unita'
                    erogante.
                diariesId:
                  type: array
                  description: Lista identificativi agende su cui applicare la sospensione.
                    Obbligatorio se allDiaries e' false.
                  items:
                    type: string
                disableReasonId:
                  type: string
                  description: Identificativo motivazione disattivazione della sospensione.
                reasonId:
                  type: string
                  description: Identificativo motivazione della sospensione.
                siteId:
                  type: string
                  description: Id sede
                unitId:
                  type: string
                  description: Id unita' erogante
                toDate:
                  type: string
                  description: Data di fine della sospensione in formato Unix epoch
                fromDate:
                  type: string
                  description: Data di inizio della sospensione in formato Unix epoch
                operationUnitId:
                  type: string
                  description: Id unita' operativa
                suspBookings:
                  description: Indica se sospendere gli appuntamenti esistenti all'atto di
                    creazione/aggiornamento della sospensione.
                  type: boolean
                weekdayMask:
                  type: integer
                  enum:
                    - 1
                    - 2
                    - 4
                    - 8
                    - 16
                    - 32
                    - 64
                  description: "Bitmask dei giorni della settimana: Lunedì = 1, Martedì = 2,
                    Mercoledì = 4, Giovedì = 8, Venerdì = 16, Sabato = 32,
                    Domenica = 64"
              required:
                - allDiaries
                - diariesId
                - disableReasonId
                - reasonId
                - siteId
                - unitId
                - toDate
                - fromDate
                - operationUnitId
                - weekdayMask
        required: true
      responses:
        "200":
          description: Default Response
  /api/v4/process-apis/booking-management/bookings/notification:
    post:
      tags:
        - Incoming V4
      responses:
        "200":
          description: Default Response
  /api/v4/process-apis/booking-management/pre-bookings/notification:
    post:
      tags:
        - Incoming V4
      responses:
        "200":
          description: Default Response
  "/api/v4/process-apis/booking-management/bookings/{bookingCode}":
    delete:
      tags:
        - Incoming V4
      parameters:
        - schema:
            type: string
            minLength: 1
          in: path
          name: bookingCode
          required: true
      responses:
        "200":
          description: Default Response
  /api/v4/process-apis/booking-management/bookings:
    post:
      tags:
        - Incoming V4
      responses:
        "200":
          description: Default Response
  /api/v4/admission:
    post:
      summary: Notifica di accettazione
      tags:
        - Outgoing V4
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                admissionTypeId:
                  type: string
                  description: Id tipologia di accettazione
                details:
                  type: array
                  description: Elenco dettagli prestazioni
                  items:
                    type: object
                    properties:
                      bookingCode:
                        type: string
                        description: Eventuale codice della prenotazione
                      executionDatetime:
                        type: string
                        description: Data/ora erogazione della prestazione in formato Unix epoch
                      scheduledDatetime:
                        type: string
                        description: Data/ora di presunta erogazione in formato Unix epoch
                      bookingDate:
                        type: string
                      phoneNumber:
                        type: string
                        description: Numero di telefono paziente per eventuali comunicazioni,
                          obbligatorio se assente reasonDenyPhoneNumber
                      quantity:
                        type: number
                        description: Quantita'
                      reasonDenyPhoneNumber:
                        type: string
                        description: Motivazione indisponibilità numero di telefono
                      serviceCode:
                        type: string
                        description: Codice prestazione
                      specializationCode:
                        type: string
                        description: Branca della prestazione
                    required:
                      - executionDatetime
                      - scheduledDatetime
                      - serviceCode
                directEntry:
                  type: boolean
                  description: Flag per indicare se accesso diretto
                executionUnitId:
                  type: string
                  description: Identificativo di sistema dell'unità erogante
                personIdentifier:
                  type: string
                  description: "Codice Identificativo della persona: CF, ENI o STP"
                prescription:
                  type: object
                  description: Informazioni relative alla ricetta
                  properties:
                    compilationDatetime:
                      type: number
                      description: Data compilazione ricetta in formato Unix epoch
                    diagnosisCode:
                      type: string
                      description: Codice dell'eventuale diagnosi
                    doctorIdentifier:
                      type: string
                      description: Codice fiscale medico che ha emesso la ricetta
                    doctorType:
                      type: string
                      description: Tipologia del medico
                    exemptionCode:
                      type: string
                      description: Identificativo ministeriale dell'eventuale esenzione
                    nreAccessType:
                      type: string
                      enum:
                        - ACCESSO_SUCCESSIVO
                        - PRIMO_ACCESSO
                      description: Tipo di accesso
                    prescriptionNumber:
                      type: string
                      description: Numero ricetta
                    priorityClass:
                      type: string
                      enum:
                        - B
                        - D
                        - P
                        - U
                      description: Classe di priorita' della ricetta
                  required:
                    - compilationDatetime
                    - doctorType
                    - priorityClass
                prescriptionNRE:
                  type: string
                  description: Numero di ricetta elettronica, obbligatorio se assente l'oggetto
                    prescription
                site:
                  type: object
                  description: Informazioni della sede
                  properties:
                    identifiedBy:
                      type: string
                      description: Campo per indicare tipologia di indentificazione della sede
                    identifier:
                      type: string
                      description: Codice identificativo della sede
                  required:
                    - identifiedBy
                    - identifier
                supplyModeCategoryId:
                  type: string
                  description: Id categoria regime di erogazione.
              required:
                - admissionTypeId
                - details
                - personIdentifier
                - site
                - supplyModeCategoryId
        required: true
      responses:
        "200":
          description: Default Response
    patch:
      summary: Modifica lo stato dell'accettazione
      tags:
        - Outgoing V4
      requestBody:
        content:
          application/json:
            schema:
              type: array
              items:
                type: object
                properties:
                  admissionIdentification:
                    type: object
                    description: Rappresenta il tipo di codice identificativo e lo stesso codice
                      utilizzati per identificare un'accettazione.
                    properties:
                      identifiedBy:
                        type: string
                        enum:
                          - CODICE_ACCETTAZIONE
                          - NUMERO_RICETTA
                        description: Tipo di codice con cui identificare l'accettazione.
                      identifier:
                        type: string
                        description: Identificativo dell'accettazione. Varia in base al tipo di
                          identificativo scelto nel campo identifiedBy
                    required:
                      - identifiedBy
                      - identifier
                  admissionStatus:
                    type: string
                    enum:
                      - DA_EROGARE
                      - ELIMINATA
                      - EROGATA
                      - NON_EROGATA
                      - PRESCRITTA
                    description: Nuovo stato da assegnare all'accettazione.
                  reasonId:
                    type: integer
                    description: Identificativo motivazione del cambio di stato. Necessaria solo nel
                      caso di stato NON_EROGATA.
                required:
                  - admissionStatus
      responses:
        "200":
          description: Default Response
  /api/log/groups/:
    get:
      responses: {}
  /api/log/infologs/:
    get:
      parameters:
        - schema:
            type: string
          in: query
          name: idGruppo
          required: true
        - schema:
            type: string
            format: date-time
          in: query
          name: dataInizio
          required: false
        - schema:
            type: string
            format: date-time
          in: query
          name: dataFine
          required: false
        - schema:
            type: integer
            minimum: 0
          in: query
          name: offset
          required: true
        - schema:
            type: integer
            minimum: 1
            maximum: 100
          in: query
          name: limit
          required: true
      responses:
        "200":
          description: Default Response
          content:
            application/json:
              schema:
                type: object
                properties:
                  error:
                    type: boolean
                    default: false
                  code:
                    type: string
                    default: ""
                  msg:
                    type: string
                    default: ok
                  data:
                    nullable: true
                    type: object
                    properties:
                      totalRecords:
                        type: integer
                      records:
                        type: array
                        items:
                          type: object
                          properties:
                            sezione:
                              type: string
                            idGruppo:
                              type: string
                              nullable: true
                            descrizioneEvento:
                              type: string
                            username:
                              type: string
                            ip:
                              type: string
                            userAgent:
                              type: string
                              nullable: true
                            stato:
                              type: string
                            idRisorsa:
                              type: string
                              nullable: true
                            operation:
                              type: string
                            dataOra:
                              type: string
                              format: date-time
                              nullable: true
  /api/log/infologs/success:
    get:
      parameters:
        - schema:
            type: string
          in: query
          name: idGruppo
          required: true
        - schema:
            type: string
            format: date-time
          in: query
          name: dataInizio
          required: false
        - schema:
            type: string
            format: date-time
          in: query
          name: dataFine
          required: false
        - schema:
            type: integer
            minimum: 0
          in: query
          name: offset
          required: true
        - schema:
            type: integer
            minimum: 1
            maximum: 100
          in: query
          name: limit
          required: true
      responses:
        "200":
          description: Default Response
          content:
            application/json:
              schema:
                type: object
                properties:
                  error:
                    type: boolean
                    default: false
                  code:
                    type: string
                    default: ""
                  msg:
                    type: string
                    default: ok
                  data:
                    nullable: true
                    type: object
                    properties:
                      totalRecords:
                        type: integer
                      records:
                        type: array
                        items:
                          type: object
                          properties:
                            sezione:
                              type: string
                            operation:
                              type: string
                            idGruppo:
                              type: string
                              nullable: true
                            descrizioneEvento:
                              type: string
                            dataOra:
                              type: string
                              format: date-time
                              nullable: true
  /api/log/infologs/statistics:
    get:
      parameters:
        - schema:
            type: string
          in: query
          name: idGruppo
          required: true
        - schema:
            type: string
            format: date-time
          in: query
          name: dataInizio
          required: false
        - schema:
            type: string
            format: date-time
          in: query
          name: dataFine
          required: false
      responses: {}
  /api/log/login/:
    post:
      requestBody:
        content:
          application/json:
            schema:
              type: object
              additionalProperties: false
              properties:
                username:
                  type: string
                password:
                  type: string
              required:
                - username
                - password
        required: true
      responses:
        "200":
          description: Default Response
          content:
            application/json:
              schema:
                type: object
                properties:
                  error:
                    type: boolean
                    default: false
                  code:
                    type: string
                    default: ""
                  msg:
                    type: string
                    default: ok
                  data:
                    nullable: true
                    type: object
                    properties:
                      token:
                        type: string
                      ruolo:
                        type: string
                        enum:
                          - ADMIN
                          - READ_OPERATOR
  /api/log/users/changePwd:
    patch:
      requestBody:
        content:
          application/json:
            schema:
              type: object
              additionalProperties: false
              properties:
                oldPassword:
                  type: string
                newPassword:
                  type: string
              required:
                - oldPassword
                - newPassword
        required: true
      responses:
        "200":
          description: Default Response
  /api/log/users/:
    patch:
      requestBody:
        content:
          application/json:
            schema:
              type: array
              items:
                type: object
                properties:
                  id:
                    type: string
                  attivo:
                    type: boolean
                required:
                  - id
                  - attivo
              minItems: 1
      responses:
        "200":
          description: Default Response
          content:
            application/json:
              schema:
                type: object
                properties:
                  error:
                    type: boolean
                    default: false
                  code:
                    type: string
                    default: ""
                  msg:
                    type: string
                    default: ok
                  data:
                    nullable: true
                    type: array
                    items:
                      type: object
                      properties:
                        id:
                          type: string
                        successUpdate:
                          type: boolean
    post:
      requestBody:
        content:
          application/json:
            schema:
              type: object
              additionalProperties: false
              properties:
                username:
                  type: string
                password:
                  type: string
                idGruppo:
                  type: array
                  items:
                    type: string
                ruolo:
                  type: string
                  enum:
                    - ADMIN
                    - READ_OPERATOR
              required:
                - username
                - password
                - ruolo
        required: true
      responses:
        "200":
          description: Default Response
          content:
            application/json:
              schema:
                type: object
                properties:
                  error:
                    type: boolean
                    default: false
                  code:
                    type: string
                    default: ""
                  msg:
                    type: string
                    default: ok
                  data:
                    nullable: true
        "201":
          description: Default Response
          content:
            application/json:
              schema:
                type: object
                properties:
                  id:
                    type: string
                  username:
                    type: string
                  idGruppo:
                    type: array
                    items:
                      type: string
                  ruolo:
                    type: string
                    enum:
                      - ADMIN
                      - READ_OPERATOR
    get:
      parameters:
        - schema:
            type: integer
            minimum: 0
          in: query
          name: offset
          required: true
        - schema:
            type: integer
            maximum: 100
          in: query
          name: limit
          required: true
        - schema:
            type: string
            maxLength: 50
            default: ""
          in: query
          name: search
          required: false
      responses:
        "200":
          description: Default Response
          content:
            application/json:
              schema:
                type: object
                properties:
                  error:
                    type: boolean
                    default: false
                  code:
                    type: string
                    default: ""
                  msg:
                    type: string
                    default: ok
                  data:
                    nullable: true
                    type: object
                    properties:
                      totalRecords:
                        type: integer
                      records:
                        type: array
                        items:
                          type: object
                          properties:
                            _id:
                              type: string
                            username:
                              type: string
                            idGruppo:
                              type: array
                              items:
                                type: string
                            ruolo:
                              type: string
                            attivo:
                              type: boolean
  "/api/log/users/{idUser}":
    delete:
      parameters:
        - schema:
            type: string
          in: path
          name: idUser
          required: true
      responses:
        "200":
          description: Default Response
  "/api/log/users/updateUser/{idUser}":
    patch:
      requestBody:
        content:
          application/json:
            schema:
              type: object
              additionalProperties: false
              properties:
                username:
                  type: string
                password:
                  type: string
                idGruppo:
                  type: array
                  items:
                    type: string
                ruolo:
                  type: string
                  enum:
                    - ADMIN
                    - READ_OPERATOR
              required:
                - username
                - password
                - ruolo
        required: true
      parameters:
        - schema:
            type: string
          in: path
          name: idUser
          required: true
      responses:
        "200":
          description: Default Response
          content:
            application/json:
              schema:
                type: object
                properties:
                  id:
                    type: string
                  username:
                    type: string
                  idGruppo:
                    type: array
                    items:
                      type: string
                  ruolo:
                    type: string
                    enum:
                      - ADMIN
                      - READ_OPERATOR
  /api/log/roles/:
    get:
      responses:
        "200":
          description: Default Response
          content:
            application/json:
              schema:
                type: object
                properties:
                  error:
                    type: boolean
                    default: false
                  code:
                    type: string
                    default: ""
                  msg:
                    type: string
                    default: ok
                  data:
                    nullable: true
                    type: array
                    items:
                      type: string
                    examples:
                      ADMIN:
                        value: ADMIN
                      READ_OPERATOR:
                        value: READ_OPERATOR
tags:
  - name: Cup
    description: API di configurazione delle strutture sul CUP regionale
  - name: Incoming V4
    description: API di notifiche dal CUP regionale
  - name: Outgoing V4
    description: API di notifiche verso il CUP regionale
